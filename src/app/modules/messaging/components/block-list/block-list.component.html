<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/messaging/chats"></ion-back-button>
    </ion-buttons>
    <ion-title>Blocked Users</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Header -->
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Blocked Users</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Loading blocked users...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && blockedUsers.length === 0" class="empty-state">
    <ion-icon name="people-outline" size="large"></ion-icon>
    <h2>No Blocked Users</h2>
    <p>You haven't blocked any users yet.</p>
  </div>

  <!-- Blocked Users List -->
  <ion-list *ngIf="!loading && blockedUsers.length > 0" lines="full">
    <ion-item-sliding *ngFor="let user of blockedUsers" #slidingItem>
      <ion-item>
        <!-- User Avatar -->
        <ion-avatar slot="start">
          <img
            *ngIf="user.iconImage"
            [src]="user.iconImage"
            [alt]="user.name"
          />
          <div *ngIf="!user.iconImage" class="avatar-placeholder">
            {{ getInitials(user.name) }}
          </div>
        </ion-avatar>

        <!-- User Info -->
        <ion-label>
          <h2>{{ user.name }}</h2>
          <p *ngIf="user.tagline">{{ user.tagline }}</p>
          <p class="blocked-status">
            <ion-icon name="ban-outline" class="blocked-icon"></ion-icon>
            Blocked
          </p>
        </ion-label>

        <!-- Unblock Button -->
        <ion-button
          slot="end"
          fill="outline"
          color="medium"
          (click)="unblockUser(user)"
        >
          <ion-icon name="remove-circle-outline" slot="start"></ion-icon>
          Unblock
        </ion-button>
      </ion-item>

      <!-- Sliding Options -->
      <ion-item-options side="end">
        <ion-item-option
          color="medium"
          (click)="unblockUser(user); slidingItem.close()"
        >
          <ion-icon name="remove-circle-outline" slot="icon-only"></ion-icon>
        </ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>

  <!-- Footer Info -->
  <div class="footer-info" *ngIf="!loading && blockedUsers.length > 0">
    <ion-text color="medium">
      <p>
        <ion-icon name="information-circle-outline"></ion-icon>
        Unblocking a user will allow them to message you again and see your
        public content.
      </p>
    </ion-text>
  </div>
</ion-content>
