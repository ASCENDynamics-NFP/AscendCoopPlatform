<!--
Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.
Copyright (C) 2023  ASCENDynamics NFP

This file is part of Nonprofit Social Networking Platform.

Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published
by the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Nonprofit Social Networking Platform is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.
-->
<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Edit Listing</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="listingForm" (ngSubmit)="onSubmit()">
    <ion-item>
      <ion-label position="floating">Title</ion-label>
      <ion-input formControlName="title" type="text"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Description</ion-label>
      <ion-textarea formControlName="description" rows="4"></ion-textarea>
    </ion-item>

    <ion-item>
      <ion-label>Type</ion-label>
      <ion-select formControlName="type">
        <ion-select-option *ngFor="let type of listingTypes" [value]="type">
          {{type | titlecase}}
        </ion-select-option>
      </ion-select>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Organization</ion-label>
      <ion-input formControlName="organization" type="text"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label>Remote Position</ion-label>
      <ion-toggle formControlName="remote"></ion-toggle>
    </ion-item>

    <ion-item-group formGroupName="location">
      <ion-item-divider>
        <ion-label>Location</ion-label>
      </ion-item-divider>
      <ion-item>
        <ion-label position="floating">Street</ion-label>
        <ion-input formControlName="street"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">City</ion-label>
        <ion-input formControlName="city"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">State</ion-label>
        <ion-input formControlName="state"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Country</ion-label>
        <ion-input formControlName="country"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Postal Code</ion-label>
        <ion-input formControlName="postalCode"></ion-input>
      </ion-item>
    </ion-item-group>

    <ion-item-group formGroupName="timeCommitment">
      <ion-item-divider>
        <ion-label>Time Commitment</ion-label>
      </ion-item-divider>
      <ion-item>
        <ion-label position="floating">Hours per Week</ion-label>
        <ion-input type="number" formControlName="hoursPerWeek"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Duration</ion-label>
        <ion-input formControlName="duration"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Schedule</ion-label>
        <ion-input formControlName="schedule"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Start Date</ion-label>
        <ion-datetime formControlName="startDate"></ion-datetime>
      </ion-item>
      <ion-item>
        <ion-label position="floating">End Date</ion-label>
        <ion-datetime formControlName="endDate"></ion-datetime>
      </ion-item>
      <ion-item>
        <ion-label>Flexible Schedule</ion-label>
        <ion-toggle formControlName="isFlexible"></ion-toggle>
      </ion-item>
    </ion-item-group>

    <ion-item-group>
      <ion-item-divider>
        <ion-label>Skills</ion-label>
        <ion-button slot="end" (click)="addSkill()">Add Skill</ion-button>
      </ion-item-divider>
      <ion-list formArrayName="skills">
        <ion-item
          *ngFor="let skill of getFormArray('skills').controls; let i=index"
          [formGroupName]="i"
        >
          <ion-input
            formControlName="name"
            placeholder="Skill name"
          ></ion-input>
          <ion-select formControlName="level">
            <ion-select-option
              *ngFor="let level of skillLevels"
              [value]="level"
            >
              {{level | titlecase}}
            </ion-select-option>
          </ion-select>
          <ion-checkbox formControlName="required"></ion-checkbox>
          <ion-button slot="end" (click)="removeArrayItem('skills', i)"
            >Remove</ion-button
          >
        </ion-item>
      </ion-list>
    </ion-item-group>

    <ion-item-group formGroupName="contactInformation">
      <ion-item-divider>
        <ion-label>Contact Information</ion-label>
      </ion-item-divider>
      <ion-item>
        <ion-label position="floating">Email</ion-label>
        <ion-input type="email" formControlName="email"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Phone</ion-label>
        <ion-input type="tel" formControlName="phone"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Website</ion-label>
        <ion-input type="url" formControlName="website"></ion-input>
      </ion-item>
    </ion-item-group>

    <ion-button expand="block" type="submit" [disabled]="!listingForm.valid">
      Save Changes
    </ion-button>
  </form>
</ion-content>
