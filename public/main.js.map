{"version":3,"file":"main.js","mappings":"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WAAW,EAAE,4DAA4D;IACzEC,SAAS,EAAE,wBAAwB;IACnCC,aAAa,EAAE,oCAAoC;IACnDC,iBAAiB,EAAE,cAAc;IACjCC,KAAK,EAAE,2CAA2C;IAClDC,aAAa,EAAE,cAAc;IAC7BC,MAAM,EAAE;;CAEX;;;;;;;;;;;;;;;;;ACdD;;;;;;;;;;;;;;;;;;;AAmB6C;AAGF;AACY;AAEvD,IAAIppB,kEAAW,CAAC2oB,UAAU,EAAE;EAC1BU,6DAAc,EAAE;AAClB;AAEAC,sEAAA,EAAwB,CACrBE,eAAe,CAACznB,sDAAS,CAAC,CAC1B8Q,KAAK,CAAEwB,GAAG,IAAKpO,OAAO,CAACjC,KAAK,CAACqQ,GAAG,CAAC,CAAC;;;;;;;;;;AC/BrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;;;;;;;;;AC/PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/core/services/auth-sync.service.ts","./src/app/core/services/error-handler.service.ts","./src/app/core/services/firestore.service.ts","./src/app/core/services/image-upload.service.ts","./src/app/core/services/success-handler.service.ts","./src/app/modules/account/components/create-group-modal/create-group-modal.component.ts","./src/app/modules/account/components/create-group-modal/create-group-modal.component.html","./src/app/shared/components/feedback-modal/feedback-modal.component.ts","./src/app/shared/components/feedback-modal/feedback-modal.component.html","./src/app/shared/components/funding-json/funding-json.component.ts","./src/app/shared/components/menu/menu.component.ts","./src/app/shared/components/menu/menu.component.html","./src/app/state/actions/account.actions.ts","./src/app/state/actions/auth.actions.ts","./src/app/state/actions/listings.actions.ts","./src/app/state/effects/account.effects.ts","./src/app/state/effects/auth.effects.ts","./src/app/state/reducers/account.reducer.ts","./src/app/state/reducers/auth.reducer.ts","./src/app/state/reducers/index.ts","./src/app/state/reducers/listings.reducer.ts","./src/app/state/selectors/account.selectors.ts","./src/app/state/selectors/auth.selectors.ts","./src/environments/environment.ts","./src/main.ts","./node_modules/@ionic/core/dist/esm/ lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","./node_modules/@ionic/pwa-elements/dist/esm/ lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","./node_modules/@stencil/core/internal/client/ lazy ^\\.\\/.*\\.entry\\.js.*$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ strict namespace object"],"sourcesContent":["/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/app-routing.module.ts\n\nimport {NgModule} from \"@angular/core\";\nimport {RouterModule, Routes, ExtraOptions} from \"@angular/router\";\nimport {FundingJsonComponent} from \"./shared/components/funding-json/funding-json.component\";\n\nexport const routes: Routes = [\n  {\n    path: \"\",\n    redirectTo: \"\",\n    pathMatch: \"full\",\n  },\n  {path: \"funding.json\", component: FundingJsonComponent},\n  {\n    path: \"\", // Used to remove \"/auth\" from landing page.\n    loadChildren: () =>\n      import(\"./modules/auth/auth.module\").then((m) => m.AuthModule),\n  },\n  {\n    path: \"account\", // Used to organize routes in \"/account\" folder.\n    loadChildren: () =>\n      import(\"./modules/account/account.module\").then((m) => m.AccountModule),\n  },\n  {\n    path: \"auth\", // Used to organize routes in \"/auth\" folder.\n    loadChildren: () =>\n      import(\"./modules/auth/auth.module\").then((m) => m.AuthModule),\n  },\n  {\n    path: \"listings\", // Used to organize routes in \"/listings\" folder.\n    loadChildren: () =>\n      import(\"./modules/listing/listing.module\").then((m) => m.ListingModule),\n  },\n];\n\n// Router options\nconst routerOptions: ExtraOptions = {\n  anchorScrolling: \"enabled\", // Enable fragment scrolling\n  scrollPositionRestoration: \"enabled\", // Restore scroll position on navigation\n  onSameUrlNavigation: \"reload\", // Allow navigation to the same URL\n};\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, routerOptions)],\n  exports: [RouterModule],\n})\nexport class AppRoutingModule {}\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/app.component.ts\n\nimport {Component, OnInit} from \"@angular/core\";\nimport {MenuController, Platform} from \"@ionic/angular\";\nimport {TranslateService} from \"@ngx-translate/core\";\nimport {Store} from \"@ngrx/store\";\nimport {selectIsLoggedIn} from \"./state/selectors/auth.selectors\";\nimport * as AuthActions from \"./state/actions/auth.actions\";\nimport {Observable} from \"rxjs\";\nimport {tap} from \"rxjs/operators\";\nimport {register} from \"swiper/element/bundle\";\n\n//  Import and Register Swiper\nregister();\n\n@Component({\n  selector: \"app-root\",\n  templateUrl: \"app.component.html\",\n  styleUrls: [\"app.component.scss\"],\n})\nexport class AppComponent implements OnInit {\n  isLoggedIn$: Observable<boolean>;\n\n  constructor(\n    private menuCtrl: MenuController,\n    private translate: TranslateService,\n    private store: Store,\n    private platform: Platform,\n  ) {\n    this.translate.addLangs([\"en\", \"fr\"]);\n    this.initializeApp();\n\n    // Initialize the observable\n    this.isLoggedIn$ = this.store.select(selectIsLoggedIn).pipe(\n      tap(async (isLoggedIn) => {\n        await this.updateMenu(isLoggedIn);\n      }),\n    );\n  }\n\n  initializeApp() {\n    this.platform.ready().then(() => {\n      // Set the default language\n      this.translate.setDefaultLang(\"en\");\n\n      // Optionally, get the user's preferred language\n      const browserLang = this.translate.getBrowserLang();\n      this.translate.use(browserLang?.match(/en|fr|es/) ? browserLang : \"en\");\n    });\n  }\n\n  ngOnInit() {\n    // Dispatch the initialization action\n    this.store.dispatch(AuthActions.initializeAuth());\n  }\n\n  private async updateMenu(isLoggedIn: boolean) {\n    if (isLoggedIn) {\n      await this.menuCtrl.enable(false, \"guest\");\n      await this.menuCtrl.enable(true, \"user\");\n    } else {\n      await this.menuCtrl.enable(false, \"user\");\n      await this.menuCtrl.enable(true, \"guest\");\n    }\n  }\n}\n","<!--\nNonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\nCopyright (C) 2023  ASCENDynamics NFP\n\nThis file is part of Nonprofit Social Networking Platform.\n\nNonprofit Social Networking Platform is free software: you can redistribute it and/or modify\nit under the terms of the GNU Affero General Public License as published\nby the Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nNonprofit Social Networking Platform is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Affero General Public License for more details.\n\nYou should have received a copy of the GNU Affero General Public License\nalong with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n-->\n<ion-app>\n  <app-menu></app-menu>\n</ion-app>\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/app.module.ts\n\nimport {NgModule, isDevMode} from \"@angular/core\";\nimport {BrowserModule} from \"@angular/platform-browser\";\nimport {RouteReuseStrategy} from \"@angular/router\";\nimport {IonicModule, IonicRouteStrategy} from \"@ionic/angular\";\nimport {defineCustomElements} from \"@ionic/pwa-elements/loader\";\nimport {getStorage} from \"firebase/storage\";\nimport {initializeApp} from \"firebase/app\";\n\nimport {AppComponent} from \"./app.component\";\nimport {environment} from \"../environments/environment\";\n\n// LANGUAGE\nimport {HttpClientModule, HttpClient} from \"@angular/common/http\";\nimport {TranslateModule, TranslateLoader} from \"@ngx-translate/core\";\nimport {TranslateHttpLoader} from \"@ngx-translate/http-loader\";\n\n// NgRx\nimport {localStorageSync} from \"ngrx-store-localstorage\";\nimport {ActionReducer, MetaReducer, StoreModule} from \"@ngrx/store\";\nimport {EffectsModule} from \"@ngrx/effects\";\nimport {StoreDevtoolsModule} from \"@ngrx/store-devtools\";\n\n// Reducers and Effects\nimport {reducers} from \"./state/reducers\";\nimport {AccountEffects} from \"./state/effects/account.effects\";\nimport {AuthEffects} from \"./state/effects/auth.effects\";\n\n// Services\nimport {ErrorHandlerService} from \"./core/services/error-handler.service\";\nimport {FirestoreService} from \"./core/services/firestore.service\";\nimport {ImageUploadService} from \"./core/services/image-upload.service\";\nimport {SuccessHandlerService} from \"./core/services/success-handler.service\";\n\nimport {AngularFireModule} from \"@angular/fire/compat\";\nimport {AngularFirestoreModule} from \"@angular/fire/compat/firestore\";\n\nimport {AuthSyncService} from \"./core/services/auth-sync.service\";\nimport {MenuComponent} from \"./shared/components/menu/menu.component\";\nimport {AppRoutingModule} from \"./app-routing.module\";\n\n// Initialize Firebase\nconst app = initializeApp(environment.firebaseConfig);\n\n// Initialize Cloud Storage\ngetStorage(app);\n\n// Custom Elements\ndefineCustomElements(window);\n\n// Function to sync store with localStorage\nexport function localStorageSyncReducer(\n  reducer: ActionReducer<any>,\n): ActionReducer<any> {\n  return localStorageSync({\n    keys: [\"auth\", \"accounts\", \"listings\"], // Specify the state slices you want to persist\n    rehydrate: true, // Rehydrate state on application startup\n  })(reducer);\n}\n\nconst metaReducers: Array<MetaReducer<any, any>> = [localStorageSyncReducer];\n\nexport function createTranslateLoader(http: HttpClient) {\n  return new TranslateHttpLoader(http, \"./assets/i18n/\", \".json\");\n}\n\n@NgModule({\n  declarations: [AppComponent, MenuComponent],\n  imports: [\n    AngularFireModule.initializeApp(environment.firebaseConfig),\n    AngularFirestoreModule,\n    AppRoutingModule,\n    BrowserModule,\n    IonicModule.forRoot({}),\n    HttpClientModule,\n    TranslateModule.forRoot({\n      defaultLanguage: \"en\", // Set default language\n      loader: {\n        provide: TranslateLoader,\n        useFactory: createTranslateLoader,\n        deps: [HttpClient],\n      },\n    }),\n    StoreModule.forRoot(reducers, {metaReducers}),\n    EffectsModule.forRoot([AuthEffects, AccountEffects]),\n    StoreDevtoolsModule.instrument({maxAge: 25, logOnly: !isDevMode()}),\n  ],\n  providers: [\n    AuthSyncService,\n    {provide: RouteReuseStrategy, useClass: IonicRouteStrategy},\n    ErrorHandlerService,\n    FirestoreService,\n    ImageUploadService,\n    SuccessHandlerService,\n  ],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/core/services/auth-sync.service.ts\nimport {Injectable} from \"@angular/core\";\nimport {Store} from \"@ngrx/store\";\nimport {getAuth, onAuthStateChanged, User} from \"firebase/auth\";\nimport * as AuthActions from \"../../state/actions/auth.actions\";\n\n@Injectable({providedIn: \"root\"})\nexport class AuthSyncService {\n  private auth = getAuth();\n\n  constructor(private store: Store) {\n    onAuthStateChanged(this.auth, (user: User | null) => {\n      if (user) {\n        this.store.dispatch(AuthActions.signInSuccess({uid: user.uid}));\n      } else {\n        this.store.dispatch(AuthActions.signOutSuccess());\n      }\n    });\n  }\n}\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\nimport {ToastController} from \"@ionic/angular\";\nimport {Injectable} from \"@angular/core\";\n\ninterface AuthError {\n  title: string;\n  message: string;\n}\ninterface AuthErrorMap {\n  [key: string]: AuthError;\n}\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class ErrorHandlerService {\n  private readonly FIREBASE_AUTH_ERROR: AuthErrorMap = {\n    \"auth/email-already-in-use\": {\n      title: \"Email Already in Use\",\n      message:\n        \"The email address is already in use by another account. Please use a different email.\",\n    },\n    \"auth/invalid-email\": {\n      title: \"Invalid Email\",\n      message:\n        \"The email address you have entered is not valid. Please enter a valid email address.\",\n    },\n    \"auth/weak-password\": {\n      title: \"Weak Password\",\n      message:\n        \"The password you have entered is too weak. Please choose a stronger password.\",\n    },\n    \"auth/claims-too-large\": {\n      title: \"Claims Too Large\",\n      message: \"The payload size exceeds the maximum size of 1000 bytes.\",\n    },\n    \"auth/email-already-exists\": {\n      title: \"Email Already Exists\",\n      message:\n        \"The provided email is already in use by another user. Please use a different email.\",\n    },\n    \"auth/id-token-expired\": {\n      title: \"ID Token Expired\",\n      message:\n        \"The Firebase ID token you are using has expired. Please log in again.\",\n    },\n    \"auth/id-token-revoked\": {\n      title: \"ID Token Revoked\",\n      message:\n        \"The Firebase ID token you are using has been revoked. Please log in again.\",\n    },\n    \"auth/insufficient-permission\": {\n      title: \"Insufficient Permissions\",\n      message:\n        \"You do not have the necessary permissions to perform this operation.\",\n    },\n    \"auth/internal-error\": {\n      title: \"Internal Error\",\n      message:\n        \"An internal error occurred while processing your request. Please try again later.\",\n    },\n    \"auth/invalid-argument\": {\n      title: \"Invalid Argument\",\n      message:\n        \"An invalid argument was provided. Please check the input and try again.\",\n    },\n    \"auth/invalid-claims\": {\n      title: \"Invalid Claims\",\n      message:\n        \"The custom claim attributes you have entered are not valid. Please check them and try again.\",\n    },\n    \"auth/missing-oauth-client-secret\": {\n      title: \"Missing OAuth Client Secret\",\n      message:\n        \"The OAuth configuration client secret is required to enable OIDC code flow.\",\n    },\n    \"auth/operation-not-allowed\": {\n      title: \"Operation Not Allowed\",\n      message:\n        \"Email/password accounts are not enabled. Please contact support at support@ascendynamics.org.\",\n    },\n    \"auth/phone-number-already-exists\": {\n      title: \"Phone Number Already Exists\",\n      message:\n        \"The provided phone number is already in use by another user. Each user must have a unique phone number.\",\n    },\n    \"auth/project-not-found\": {\n      title: \"Project Not Found\",\n      message:\n        \"No Firebase project was found for the credential used to initialize the Admin SDKs.\",\n    },\n    \"auth/session-cookie-expired\": {\n      title: \"Session Cookie Expired\",\n      message:\n        \"The provided Firebase session cookie is expired. Please log in again.\",\n    },\n    \"auth/weakschema\": {\n      title: \"Weak Security Schema\",\n      message:\n        \"The security rules provided are not strong enough. Please provide stronger security rules and try again.\",\n    },\n    \"auth/invalid-continue-uri\": {\n      title: \"Invalid Continue URL\",\n      message: \"The continue URL must be a valid URL.\",\n    },\n    \"auth/invalid-creation-time\": {\n      title: \"Invalid Creation Time\",\n      message: \"The creation time must be a valid UTC date string.\",\n    },\n    \"auth/invalid-credential\": {\n      title: \"Invalid Credential\",\n      message:\n        \"The credential used for authentication is not valid. Please use a valid credential.\",\n    },\n    \"auth/invalid-disabled-field\": {\n      title: \"Invalid Disabled Field\",\n      message:\n        \"The value for the disabled user property is invalid. It must be a boolean.\",\n    },\n    \"auth/invalid-display-name\": {\n      title: \"Invalid Display Name\",\n      message:\n        \"The value for the display name is invalid. It must be a non-empty string.\",\n    },\n    \"auth/invalid-dynamic-link-domain\": {\n      title: \"Invalid Dynamic Link Domain\",\n      message:\n        \"The dynamic link domain is not authorized or configured for the current project.\",\n    },\n    \"auth/invalid-email-verified\": {\n      title: \"Invalid Email Verification Status\",\n      message:\n        \"The value for the email verification status is invalid. It must be a boolean.\",\n    },\n    \"auth/invalid-hash-algorithm\": {\n      title: \"Invalid Hash Algorithm\",\n      message: \"The hash algorithm must match one of the supported algorithms.\",\n    },\n    \"auth/invalid-hash-block-size\": {\n      title: \"Invalid Hash Block Size\",\n      message: \"The hash block size must be a valid number.\",\n    },\n    \"auth/invalid-hash-derived-key-length\": {\n      title: \"Invalid Hash Derived Key Length\",\n      message: \"The hash derived key length must be a valid number.\",\n    },\n    \"auth/invalid-hash-key\": {\n      title: \"Invalid Hash Key\",\n      message: \"The hash key must be a valid byte buffer.\",\n    },\n    \"auth/invalid-hash-memory-cost\": {\n      title: \"Invalid Hash Memory Cost\",\n      message: \"The hash memory cost must be a valid number.\",\n    },\n    \"auth/invalid-hash-parallelization\": {\n      title: \"Invalid Hash Parallelization\",\n      message: \"The hash parallelization must be a valid number.\",\n    },\n    \"auth/invalid-hash-rounds\": {\n      title: \"Invalid Hash Rounds\",\n      message: \"The hash rounds must be a valid number.\",\n    },\n    \"auth/invalid-hash-salt-separator\": {\n      title: \"Invalid Hash Salt Separator\",\n      message:\n        \"The hashing algorithm salt separator field must be a valid byte buffer.\",\n    },\n    \"auth/invalid-id-token\": {\n      title: \"Invalid ID Token\",\n      message: \"The provided ID token is not a valid Firebase ID token.\",\n    },\n    \"auth/invalid-last-sign-in-time\": {\n      title: \"Invalid Last Sign-In Time\",\n      message: \"The last sign-in time must be a valid UTC date string.\",\n    },\n    \"auth/invalid-page-token\": {\n      title: \"Invalid Page Token\",\n      message:\n        \"The provided next page token in listUsers() is invalid. It must be a valid non-empty string.\",\n    },\n    \"auth/invalid-password\": {\n      title: \"Invalid Password\",\n      message:\n        \"The provided value for the password user property is invalid. It must be a string with at least six characters.\",\n    },\n    \"auth/invalid-password-hash\": {\n      title: \"Invalid Password Hash\",\n      message: \"The password hash must be a valid byte buffer.\",\n    },\n    \"auth/invalid-password-salt\": {\n      title: \"Invalid Password Salt\",\n      message: \"The password salt must be a valid byte buffer.\",\n    },\n    \"auth/invalid-phone-number\": {\n      title: \"Invalid Phone Number\",\n      message:\n        \"The provided value for the phone number is invalid. It must be a non-empty E.164 standard compliant identifier string.\",\n    },\n    \"auth/invalid-photo-url\": {\n      title: \"Invalid Photo URL\",\n      message:\n        \"The provided value for the photoURL user property is invalid. It must be a string URL.\",\n    },\n    \"auth/invalid-provider-data\": {\n      title: \"Invalid Provider Data\",\n      message: \"The providerData must be a valid array of UserInfo objects.\",\n    },\n    \"auth/invalid-provider-id\": {\n      title: \"Invalid Provider ID\",\n      message:\n        \"The providerId must be a valid supported provider identifier string.\",\n    },\n    \"auth/invalid-oauth-responsetype\": {\n      title: \"Invalid OAuth Response Type\",\n      message: \"Only exactly one OAuth responseType should be set to true.\",\n    },\n    \"auth/invalid-session-cookie-duration\": {\n      title: \"Invalid Session Cookie Duration\",\n      message:\n        \"The session cookie duration must be a valid number in milliseconds between 5 minutes and 2 weeks.\",\n    },\n    \"auth/invalid-uid\": {\n      title: \"Invalid UID\",\n      message:\n        \"The provided UID must be a non-empty string with at most 128 characters.\",\n    },\n    \"auth/invalid-user-import\": {\n      title: \"Invalid User Import\",\n      message: \"The user record to import is invalid.\",\n    },\n    \"auth/maximum-user-count-exceeded\": {\n      title: \"Maximum User Count Exceeded\",\n      message:\n        \"The maximum allowed number of users to import has been exceeded.\",\n    },\n    \"auth/missing-android-pkg-name\": {\n      title: \"Missing Android Package Name\",\n      message:\n        \"An Android Package Name must be provided if the Android App is required to be installed.\",\n    },\n    \"auth/missing-continue-uri\": {\n      title: \"Missing Continue URL\",\n      message: \"A valid continue URL must be provided in the request.\",\n    },\n    \"auth/missing-hash-algorithm\": {\n      title: \"Missing Hash Algorithm\",\n      message:\n        \"Importing users with password hashes requires that the hashing algorithm and its parameters be provided.\",\n    },\n    \"auth/missing-ios-bundle-id\": {\n      title: \"Missing iOS Bundle ID\",\n      message: \"The request is missing a Bundle ID.\",\n    },\n    \"auth/missing-uid\": {\n      title: \"Missing UID\",\n      message: \"A UID identifier is required for the current operation.\",\n    },\n    \"auth/reserved-claims\": {\n      title: \"Reserved Claims Used\",\n      message:\n        \"One or more custom user claims provided to setCustomUserClaims() are reserved and should not be used.\",\n    },\n    \"auth/session-cookie-revoked\": {\n      title: \"Session Cookie Revoked\",\n      message: \"The Firebase session cookie has been revoked.\",\n    },\n    \"auth/uid-already-exists\": {\n      title: \"UID Already Exists\",\n      message:\n        \"The provided UID is already in use by another user. Each user must have a unique UID.\",\n    },\n    \"auth/unauthorized-continue-uri\": {\n      title: \"Unauthorized Continue URL\",\n      message:\n        \"The domain of the continue URL is not whitelisted. Whitelist the domain in the Firebase Console.\",\n    },\n    \"auth/user-not-found\": {\n      title: \"User Not Found\",\n      message:\n        \"There is no existing user record corresponding to the provided identifier.\",\n    },\n    \"auth/wrong-password\": {\n      title: \"Incorrect Password\",\n      message: \"The password you have entered is incorrect. Please try again.\",\n    },\n    \"auth/invalid-action-code\": {\n      title: \"Invalid Action Code\",\n      message:\n        \"The action code in your link seems to be incorrect or expired. Please request a new one.\",\n    },\n    \"storage/unauthorized\": {\n      title: \"Unauthorized Upload\",\n      message:\n        \"You don't have permission to upload this file. Ensure the file is a JPEG, PNG, or GIF and is no larger than 5MB.\",\n    },\n  };\n\n  constructor(private toastController: ToastController) {}\n\n  handleFirebaseAuthError(error: {code: string; message: string}) {\n    let title = \"Error\";\n    let message = error.message;\n\n    if (this.FIREBASE_AUTH_ERROR.hasOwnProperty(error.code)) {\n      title = this.FIREBASE_AUTH_ERROR[error.code]?.title;\n      message = this.FIREBASE_AUTH_ERROR[error.code]?.message;\n    }\n\n    this.showToast(message, title); // Show the toast with the error message\n\n    return message;\n  }\n\n  private async showToast(message: string, title: string): Promise<void> {\n    const toast = await this.toastController.create({\n      message: `${title}: ${message}`,\n      duration: 8000,\n      position: \"top\",\n      color: \"danger\",\n      buttons: [\n        {\n          text: \"Close\",\n          role: \"cancel\",\n        },\n      ],\n    });\n    await toast.present();\n  }\n}\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/core/services/firestore.service.ts\nimport {Injectable} from \"@angular/core\";\nimport {combineLatest, firstValueFrom, Observable, of} from \"rxjs\";\nimport {map, catchError} from \"rxjs/operators\";\nimport {FirebaseError} from \"firebase/app\";\nimport {Account, RelatedAccount} from \"../../models/account.model\";\nimport {AngularFirestore, Query} from \"@angular/fire/compat/firestore\";\nimport {AngularFireStorage} from \"@angular/fire/compat/storage\";\nimport {RelatedListing} from \"../../models/related-listing.model\";\nimport {DocumentData, WhereFilterOp} from \"firebase/firestore\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class FirestoreService {\n  constructor(\n    private afs: AngularFirestore,\n    private storage: AngularFireStorage,\n  ) {}\n\n  // Helper to ensure documents have an id property\n  private populateId<T>(data: T, id: string): T {\n    return {...data, id} as T;\n  }\n\n  // Firebase Query Logic (Start) //\n\n  /**\n   * Retrieves a specific document from a given collection in real-time.\n   *\n   * @param {string} collectionName - Name of the collection.\n   * @param {string} documentId - ID of the document to retrieve.\n   * @returns {Observable<T | null>} - Returns an Observable of the document data if found, otherwise null.\n   */\n  getDocument<T>(\n    collectionName: string,\n    documentId: string,\n  ): Observable<T | null> {\n    return this.afs\n      .collection<T>(collectionName)\n      .doc<T>(documentId)\n      .valueChanges()\n      .pipe(\n        map((data) => (data ? this.populateId(data, documentId) : null)), // Populate id\n        catchError((error) => {\n          console.error(\"Error retrieving document:\", error);\n          return of(null);\n        }),\n      );\n  }\n\n  /**\n   * Adds a new document to a specified collection.\n   *\n   * @param {string} collectionName - Name of the collection.\n   * @param {any} documentData - Data of the document to add.\n   * @returns {Promise<string>} - Returns the ID of the added document.\n   */\n  async addDocument(\n    collectionName: string,\n    documentData: any,\n  ): Promise<string> {\n    try {\n      const documentRef = await this.afs\n        .collection(collectionName)\n        .add(documentData);\n      return documentRef.id;\n    } catch (error) {\n      throw new FirebaseError(\n        \"add-document-error\",\n        `Error adding document: ${error}`,\n      );\n    }\n  }\n\n  /**\n   * Sets a document in Firestore, creating or updating it as necessary.\n   * @param docPath The path to the document.\n   * @param documentData The data of the document.\n   * @param options Options for setting the document.\n   */\n  async setDocument(\n    docPath: string,\n    documentData: any,\n    options?: {merge: boolean},\n  ): Promise<void> {\n    try {\n      await this.afs.doc(docPath).set(documentData, options || {});\n    } catch (error) {\n      console.error(\"Error setting document at path:\", docPath, error);\n      throw error; // Propagate the error\n    }\n  }\n\n  /**\n   * Updates a specific document in a given collection.\n   *\n   * @param {string} collectionName - Name of the collection.\n   * @param {string} documentId - ID of the document to update.\n   * @param {any} updatedData - New data to update the document with.\n   * @returns {Promise<void>}\n   */\n  async updateDocument(\n    collectionName: string,\n    documentId: string,\n    updatedData: any,\n  ): Promise<void> {\n    try {\n      await this.afs\n        .collection(collectionName)\n        .doc(documentId)\n        .update(updatedData);\n    } catch (error) {\n      throw new FirebaseError(\n        \"update-document-error\",\n        `Error updating document: ${error}`,\n      );\n    }\n  }\n\n  /**\n   * Updates a document at the given path in Firestore.\n   *\n   * @param {string} docPath - The full path to the document.\n   * @param {any} updatedData - The data to update.\n   * @returns {Promise<void>}\n   */\n  async updateDocumentAtPath(docPath: string, updatedData: any): Promise<void> {\n    try {\n      await this.afs.doc(docPath).update(updatedData);\n    } catch (error) {\n      throw new FirebaseError(\n        \"update-document-at-path-error\",\n        `Error updating document at path ${docPath}: ${error}`,\n      );\n    }\n  }\n\n  /**\n   * Deletes a specific document from a given collection.\n   *\n   * @param {string} collectionName - Name of the collection.\n   * @param {string} documentId - ID of the document to delete.\n   * @returns {Promise<void>}\n   */\n  async deleteDocument(\n    collectionName: string,\n    documentId: string,\n  ): Promise<void> {\n    try {\n      await this.afs.collection(collectionName).doc(documentId).delete();\n    } catch (error) {\n      throw new FirebaseError(\n        \"delete-document-error\",\n        `Error deleting document: ${error}`,\n      );\n    }\n  }\n\n  /**\n   * Deletes a document at a specific Firestore path.\n   * @param fullPath The full Firestore path to the document (e.g., 'listings/{listingId}/relatedAccounts/{relatedAccountId}').\n   * @returns {Promise<void>}\n   */\n  async deleteDocumentAtPath(fullPath: string): Promise<void> {\n    try {\n      await this.afs.doc(fullPath).delete();\n    } catch (error) {\n      console.error(`Error deleting document at path: ${fullPath}`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Retrieves documents from a collection based on a specified condition in real-time.\n   *\n   * @param {string} collectionName - Name of the collection.\n   * @param {string} field - Field name to apply the condition on.\n   * @param {any} condition - Condition to apply.\n   * @param {any} value - Value to match against.\n   * @returns {Observable<T[]>} - Returns an Observable of an array of documents that match the condition.\n   */\n  getCollectionWithCondition<T>(\n    collectionName: string,\n    field: string,\n    condition: any,\n    value: any,\n  ): Observable<T[]> {\n    const collectionRef = this.afs.collection<T>(collectionName, (ref) =>\n      ref.where(field, condition, value),\n    );\n    return collectionRef.snapshotChanges().pipe(\n      map((actions) =>\n        actions.map((action) => {\n          const data = action.payload.doc.data() as T;\n          const id = action.payload.doc.id;\n          return this.populateId(data, id); // Ensure id is populated\n        }),\n      ),\n      catchError((error) => {\n        console.error(\"Error retrieving collection with condition:\", error);\n        return of([]);\n      }),\n    );\n  }\n\n  /**\n   * Searches for documents in a collection based on a name field in real-time.\n   *\n   * @param {string} collectionName - Name of the collection.\n   * @param {string} searchTerm - Term to search for.\n   * @param {string} [userId] - Current user Id (optional).\n   * @returns {Observable<Account[]>} - Returns an Observable of an array of accounts that match the search term.\n   */\n  searchAccountByName(\n    collectionName: string,\n    searchTerm: string,\n  ): Observable<Account[]> {\n    const collectionRef = this.afs.collection<Account>(\n      collectionName,\n      (ref) => {\n        let queryRef = ref\n          .where(\"privacy\", \"==\", \"public\")\n          .where(\"type\", \"in\", [\"user\", \"group\"]);\n\n        // Firestore does not support OR queries directly, but we can perform multiple queries and combine the results\n        // For simplicity, we'll only handle the search term as-is\n        queryRef = queryRef\n          .orderBy(\"name\")\n          .startAt(searchTerm)\n          .endAt(searchTerm + \"\\uf8ff\");\n\n        return queryRef;\n      },\n    );\n\n    return collectionRef.valueChanges({idField: \"id\"}).pipe(\n      catchError((error) => {\n        console.error(\"Error searching accounts:\", error);\n        return of([]);\n      }),\n    );\n  }\n\n  /**\n   * Retrieves documents from a relatedAccounts sub-collection for a given account in real-time.\n   *\n   * @param {string} accountId - ID of the account.\n   * @returns {Observable<RelatedAccount[]>} - Returns an Observable of an array of related accounts.\n   */\n  getRelatedAccounts(accountId: string): Observable<RelatedAccount[]> {\n    const relatedAccountsRef = this.afs.collection<RelatedAccount>(\n      `accounts/${accountId}/relatedAccounts`,\n    );\n\n    return relatedAccountsRef.snapshotChanges().pipe(\n      map((actions) =>\n        actions.map((action) => {\n          const data = action.payload.doc.data() as RelatedAccount;\n          const id = action.payload.doc.id;\n          return this.populateId(data, id); // Ensure id is populated\n        }),\n      ),\n      catchError((error) => {\n        console.error(\"Error getting related accounts:\", error);\n        return of([]);\n      }),\n    );\n  }\n\n  /**\n   * Retrieves all public user or group accounts from the 'accounts' collection in real-time.\n   * @returns {Observable<Account[]>} - Returns an Observable of an array of account documents.\n   */\n  getAllAccounts(): Observable<Account[]> {\n    return this.afs\n      .collection<Account>(\"accounts\", (ref) =>\n        ref\n          .where(\"privacy\", \"==\", \"public\")\n          .where(\"type\", \"in\", [\"user\", \"group\"]),\n      )\n      .snapshotChanges()\n      .pipe(\n        map((actions) =>\n          actions.map((action) => {\n            const data = action.payload.doc.data() as Account;\n            const id = action.payload.doc.id;\n            return this.populateId(data, id); // Ensure id is populated\n          }),\n        ),\n        catchError((error) => {\n          console.error(\"Error getting accounts:\", error);\n          return of([]);\n        }),\n      );\n  }\n\n  /**\n   * Retrieves an account with its related accounts and related listings.\n   *\n   * @param {string} accountId - ID of the account.\n   * @returns {Observable<{ account: Account | null; relatedAccounts: RelatedAccount[]; relatedListings: RelatedListing[] }>}\n   */\n  getAccountWithRelated(accountId: string): Observable<{\n    account: Account | null;\n    relatedAccounts: RelatedAccount[];\n    relatedListings: RelatedListing[];\n  }> {\n    return combineLatest([\n      this.getDocument<Account>(\"accounts\", accountId),\n      this.getRelatedAccounts(accountId),\n      this.afs\n        .collection<RelatedListing>(`accounts/${accountId}/relatedListings`)\n        .snapshotChanges()\n        .pipe(\n          map((actions) =>\n            actions.map((action) => {\n              const data = action.payload.doc.data() as RelatedListing;\n              const id = action.payload.doc.id;\n              return this.populateId(data, id); // Ensure id is populated\n            }),\n          ),\n          catchError(() => of([])),\n        ),\n    ]).pipe(\n      map(([account, relatedAccounts, relatedListings]) => ({\n        account,\n        relatedAccounts,\n        relatedListings,\n      })),\n      catchError((error) => {\n        console.error(\"Error getting account with related data:\", error);\n        return of({\n          account: null,\n          relatedAccounts: [],\n          relatedListings: [],\n        });\n      }),\n    );\n  }\n\n  // Firebase Query Logic (Ends) //\n\n  /**\n   * Retrieves documents from any collection or sub-collection.\n   * @param fullPath The full Firestore path to the collection (e.g., 'listings/{listingId}/relatedAccounts').\n   * @param conditions Optional conditions to filter documents.\n   * @returns {Observable<T[]>}\n   */\n  getDocuments<T>(\n    fullPath: string,\n    conditions?: {\n      field: string;\n      operator: WhereFilterOp;\n      value: any;\n    }[],\n  ): Observable<T[]> {\n    const collectionRef = this.afs.collection<T>(fullPath, (ref) => {\n      let query: Query<DocumentData> = ref; // Use Query type\n      if (conditions) {\n        conditions.forEach((condition) => {\n          query = query.where(\n            condition.field,\n            condition.operator,\n            condition.value,\n          );\n        });\n      }\n      return query;\n    });\n\n    return collectionRef.snapshotChanges().pipe(\n      map((actions) =>\n        actions.map((action) => {\n          const data = action.payload.doc.data() as T;\n          const id = action.payload.doc.id;\n          return {...data, id}; // Ensure id is populated\n        }),\n      ),\n      catchError((error) => {\n        console.error(\n          `Error retrieving documents from path: ${fullPath}`,\n          error,\n        );\n        return of([]);\n      }),\n    );\n  }\n\n  // Upload a file to Firestore storage\n  async uploadFile(path: string, file: File): Promise<string> {\n    const fileRef = this.storage.ref(path);\n\n    // Upload the file\n    await this.storage.upload(path, file);\n\n    // Get the download URL using firstValueFrom\n    return firstValueFrom(fileRef.getDownloadURL());\n  }\n}\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/core/services/image-upload.service.ts\nimport {Injectable} from \"@angular/core\";\nimport {LoadingController, ToastController} from \"@ionic/angular\";\nimport {\n  getStorage,\n  ref,\n  uploadBytesResumable,\n  getDownloadURL,\n  UploadTask,\n  UploadTaskSnapshot,\n} from \"firebase/storage\";\nimport {FirestoreService} from \"./firestore.service\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class ImageUploadService {\n  private storage = getStorage();\n\n  constructor(\n    private loadingController: LoadingController,\n    private firestoreService: FirestoreService,\n    private toastController: ToastController,\n  ) {}\n\n  async uploadImage(\n    file: File,\n    firestoreLocation: string,\n    collectionName: string,\n    docId: string,\n    maxWidth: number,\n    maxHeight: number,\n    fieldName: string,\n  ): Promise<string> {\n    const loading = await this.loadingController.create({\n      message: \"Starting upload...\",\n    });\n    await loading.present();\n\n    try {\n      const resizedImageBlob = await this.resizeImage(\n        file,\n        maxWidth,\n        maxHeight,\n      );\n      const filePath = `${firestoreLocation}/${new Date().toISOString()}_${\n        file.name\n      }`;\n      const storageRef = ref(this.storage, filePath);\n      const uploadTask = uploadBytesResumable(storageRef, resizedImageBlob);\n\n      const downloadURL = await this.monitorUploadTask(uploadTask, loading);\n      await this.saveImageToFirestore(\n        collectionName,\n        docId,\n        downloadURL,\n        fieldName,\n      );\n\n      return downloadURL;\n    } catch (error: any) {\n      await loading.dismiss();\n      await this.showErrorToast(`Upload failed: ${error.message || error}`);\n      throw error;\n    } finally {\n      await loading.dismiss();\n    }\n  }\n\n  private monitorUploadTask(\n    uploadTask: UploadTask,\n    loading: HTMLIonLoadingElement,\n  ): Promise<string> {\n    return new Promise((resolve, reject) => {\n      uploadTask.on(\n        \"state_changed\",\n        (snapshot: UploadTaskSnapshot) => {\n          const progress =\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n          loading.message = `Uploading file... ${progress.toFixed(0)}%`;\n        },\n        (error) => {\n          reject(error);\n        },\n        async () => {\n          try {\n            const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);\n            resolve(downloadURL);\n          } catch (error) {\n            reject(error);\n          }\n        },\n      );\n    });\n  }\n\n  private async saveImageToFirestore(\n    collectionName: string,\n    docId: string,\n    downloadURL: string,\n    fieldName: string,\n  ): Promise<void> {\n    if (!docId) {\n      throw new Error(\"Missing document ID\");\n    }\n    if (!downloadURL) {\n      throw new Error(\"Missing download URL\");\n    }\n    if (!fieldName) {\n      throw new Error(\"Missing field name\");\n    }\n    if (!collectionName) {\n      throw new Error(\"Missing collection name\");\n    }\n    const docData = {[fieldName]: downloadURL};\n    await this.firestoreService.updateDocument(collectionName, docId, docData);\n  }\n\n  private async showErrorToast(message: string): Promise<void> {\n    const toast = await this.toastController.create({\n      message: message,\n      duration: 2000,\n      color: \"danger\",\n    });\n    await toast.present();\n  }\n\n  private resizeImage(\n    file: File,\n    maxWidth: number,\n    maxHeight: number,\n  ): Promise<Blob> {\n    return new Promise((resolve, reject) => {\n      const image = new Image();\n      const url = URL.createObjectURL(file);\n      image.src = url;\n\n      image.onload = () => {\n        URL.revokeObjectURL(url);\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        let {width, height} = image;\n\n        if (width > height) {\n          if (width > maxWidth) {\n            height *= maxWidth / width;\n            width = maxWidth;\n          }\n        } else {\n          if (height > maxHeight) {\n            width *= maxHeight / height;\n            height = maxHeight;\n          }\n        }\n\n        canvas.width = width;\n        canvas.height = height;\n        ctx?.drawImage(image, 0, 0, width, height);\n\n        canvas.toBlob(\n          (blob) => {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject(new Error(\"Canvas is empty\"));\n            }\n          },\n          \"image/jpeg\",\n          0.95,\n        );\n      };\n\n      image.onerror = (error) => {\n        URL.revokeObjectURL(url);\n        reject(new Error(`Image load error: ${error}`));\n      };\n    });\n  }\n}\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\nimport {Injectable} from \"@angular/core\";\nimport {ToastController} from \"@ionic/angular\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class SuccessHandlerService {\n  constructor(private toastController: ToastController) {}\n\n  handleSuccess(message: string, duration?: number): void {\n    this.showToast(message, duration);\n  }\n\n  private async showToast(message: string, duration?: number): Promise<void> {\n    const toast = await this.toastController.create({\n      message: message,\n      duration: duration || 10000,\n      position: \"top\",\n      color: \"success\",\n      buttons: [\n        {\n          text: \"OK\",\n          role: \"cancel\",\n        },\n      ],\n    });\n    await toast.present();\n  }\n}\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// create-group-modal.component.ts\nimport {Component} from \"@angular/core\";\nimport {ModalController} from \"@ionic/angular\";\nimport {FormBuilder, FormGroup, Validators} from \"@angular/forms\";\nimport {Timestamp} from \"firebase/firestore\";\nimport {Account} from \"../../../../models/account.model\";\nimport {Store} from \"@ngrx/store\";\nimport * as AccountActions from \"../../../../state/actions/account.actions\";\nimport {selectAuthUser} from \"../../../../state/selectors/auth.selectors\";\nimport {firstValueFrom} from \"rxjs\";\n\n@Component({\n  selector: \"app-create-group-modal\",\n  templateUrl: \"./create-group-modal.component.html\",\n  styleUrls: [\"./create-group-modal.component.scss\"],\n})\nexport class CreateGroupModalComponent {\n  public groupForm: FormGroup;\n\n  constructor(\n    private modalCtrl: ModalController,\n    private fb: FormBuilder,\n    private store: Store,\n  ) {\n    this.groupForm = this.fb.group({\n      name: [\"\", Validators.required],\n      description: [\"\", Validators.required],\n      tagline: [\"\", Validators.required],\n    });\n  }\n\n  cancel() {\n    return this.modalCtrl.dismiss(null, \"cancel\");\n  }\n\n  confirm() {\n    return this.modalCtrl.dismiss(null, \"confirm\");\n  }\n\n  async onSubmit() {\n    const groupData = this.groupForm.value;\n    const authUser = await firstValueFrom(this.store.select(selectAuthUser));\n\n    if (authUser) {\n      const newGroup: Partial<Account> = {\n        ...groupData,\n        name: groupData.name || undefined,\n        description: groupData.description || undefined,\n        tagline: groupData.tagline || undefined,\n        type: \"group\", // Specify that this account is a group\n        // Include other necessary fields like address, language, etc.\n        // Default images or placeholder values\n        iconImage: \"assets/icon/logo.png\",\n        heroImage: \"assets/image/orghero.png\",\n        // Initialize other group-specific properties if needed\n        groupDetails: {\n          admins: [authUser.uid], // Set the user ID of the creator as an admin\n          dateFounded: Timestamp.now(), // Set the founding date\n          supportedLanguages: [\"en\"], // Example value\n        },\n      };\n\n      // Dispatch action to create group\n      this.store.dispatch(\n        AccountActions.createAccount({account: newGroup as Account}),\n      );\n\n      // Close the modal after dispatching the action\n      this.modalCtrl.dismiss({accountId: newGroup.id}, \"confirm\");\n    } else {\n      // Handle error if user is not authenticated\n      this.modalCtrl.dismiss(null, \"cancel\");\n    }\n  }\n}\n","<!-- \nNonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\nCopyright (C) 2023  ASCENDynamics NFP\n\nThis file is part of Nonprofit Social Networking Platform.\n\nNonprofit Social Networking Platform is free software: you can redistribute it and/or modify\nit under the terms of the GNU Affero General Public License as published\nby the Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nNonprofit Social Networking Platform is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Affero General Public License for more details.\n\nYou should have received a copy of the GNU Affero General Public License\nalong with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n-->\n<ion-header>\n  <ion-toolbar>\n    <ion-title>Create New Group</ion-title>\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"cancel()\">Close</ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <form [formGroup]=\"groupForm\" (ngSubmit)=\"onSubmit()\">\n    <ion-item>\n      <ion-label position=\"stacked\"\n        >Group Name <ion-text color=\"danger\">*</ion-text></ion-label\n      >\n      <ion-input type=\"text\" formControlName=\"name\"></ion-input>\n    </ion-item>\n\n    <ion-item>\n      <ion-label position=\"stacked\"\n        >Group Description <ion-text color=\"danger\">*</ion-text></ion-label\n      >\n      <ion-textarea formControlName=\"description\"></ion-textarea>\n    </ion-item>\n\n    <ion-item>\n      <ion-label position=\"stacked\"\n        >Group Tagline <ion-text color=\"danger\">*</ion-text></ion-label\n      >\n      <ion-input type=\"text\" formControlName=\"tagline\"></ion-input>\n    </ion-item>\n\n    <ion-button expand=\"full\" type=\"submit\" [disabled]=\"groupForm.invalid\">\n      Create Group\n    </ion-button>\n  </form>\n</ion-content>\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\nimport {Component, Input, OnInit} from \"@angular/core\";\nimport {\n  AbstractControl,\n  FormBuilder,\n  FormGroup,\n  Validators,\n  ValidationErrors,\n} from \"@angular/forms\";\nimport {LoadingController, ModalController} from \"@ionic/angular\";\nimport {AuthUser} from \"../../../models/auth-user.model\";\nimport {FirestoreService} from \"../../../core/services/firestore.service\";\nimport {AppFeedback} from \"../../../models/feedback.model\";\nimport {\n  ref,\n  getStorage,\n  uploadBytesResumable,\n  getDownloadURL,\n} from \"firebase/storage\";\nimport {ErrorHandlerService} from \"../../../core/services/error-handler.service\";\n\n// Custom validator to check if the file is an image\nfunction imageFileValidator(control: AbstractControl): ValidationErrors | null {\n  const file = control.value;\n  if (file) {\n    const validTypes = [\"image/jpeg\", \"image/png\", \"image/gif\"];\n    if (validTypes.indexOf(file.type) === -1) {\n      return {invalidImageType: true};\n    }\n  }\n  return null;\n}\n\n// Custom validator to check if the file size is <= 5MB\nfunction fileSizeValidator(control: AbstractControl): ValidationErrors | null {\n  const file = control.value;\n  if (file && file.size > 5 * 1024 * 1024) {\n    // 5MB in bytes\n    return {invalidFileSize: true};\n  }\n  return null;\n}\n\n@Component({\n  selector: \"app-feedback-modal\",\n  templateUrl: \"./feedback-modal.component.html\",\n  styleUrls: [\"./feedback-modal.component.scss\"],\n})\nexport class FeedbackModalComponent implements OnInit {\n  @Input() user?: AuthUser;\n  feedbackForm: FormGroup;\n  categories: string[] = [\"Bug Report\", \"Feature Request\", \"General Feedback\"];\n  isUploading: boolean = false;\n  uploadedFileURL: string | null = null; // Add a new class property to store the download URL of the uploaded file\n  storage = getStorage(); // This gets the default Firebase app's storage instance\n\n  constructor(\n    private errorHandler: ErrorHandlerService,\n    private loadingController: LoadingController,\n    private modalCtrl: ModalController,\n    private firestoreService: FirestoreService,\n    private fb: FormBuilder,\n  ) {\n    this.feedbackForm = this.fb.group({\n      category: [\"Bug Report\", Validators.required],\n      feedback: [\"\", Validators.required],\n      attachment: [null, [imageFileValidator, fileSizeValidator]],\n      rating: [3, [Validators.min(1), Validators.max(5)]],\n    });\n  }\n\n  ngOnInit() {\n    if (this.user) {\n      this.feedbackForm.addControl(\n        \"name\",\n        this.fb.control(this.user.displayName, Validators.required),\n      );\n      this.feedbackForm.addControl(\n        \"email\",\n        this.fb.control(this.user.email, [\n          Validators.required,\n          Validators.email,\n        ]),\n      );\n    } else {\n      this.feedbackForm.addControl(\n        \"name\",\n        this.fb.control(\"\", Validators.required),\n      );\n      this.feedbackForm.addControl(\n        \"email\",\n        this.fb.control(\"\", [Validators.required, Validators.email]),\n      );\n    }\n  }\n\n  onFileChange(event: any) {\n    const fileList: FileList = event.target.files;\n    if (fileList.length > 0) {\n      const file: File = fileList[0];\n      this.feedbackForm.get(\"attachment\")?.setValue(file);\n      this.uploadFile(file);\n    }\n  }\n\n  async uploadFile(file: File) {\n    const storageRef = ref(\n      this.storage,\n      `feedback/${this.user?.uid}/${new Date()}-${file.name}`,\n    ); // This creates a reference to the file's future location\n\n    const uploadTask = uploadBytesResumable(storageRef, file);\n\n    // Present the loader\n    const loading = await this.loadingController.create({\n      message: \"Uploading file...\",\n    });\n    await loading.present();\n\n    this.isUploading = true;\n\n    uploadTask.on(\n      \"state_changed\",\n      (snapshot) => {\n        // Handle the upload progress, maybe update a progress bar or show a message\n        const progress =\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        // console.log(`Upload is ${progress}% done`);\n        switch (snapshot.state) {\n          case \"paused\":\n            loading.message = `Upload is paused`; // Update the loader message\n            break;\n          case \"running\":\n            loading.message = `Uploading file... ${progress.toFixed(0)}%`; // Update the loader message\n            break;\n        }\n      },\n      async (error) => {\n        // Handle errors, maybe show a message to the user\n        this.errorHandler.handleFirebaseAuthError(error);\n        switch (error.code) {\n          case \"storage/unauthorized\":\n            console.error(\"User doesn't have permission to access the object\");\n            break;\n          case \"storage/canceled\":\n            console.error(\"User canceled the upload\");\n            break;\n          case \"storage/unknown\":\n            console.error(\n              \"Unknown error occurred, inspect error.serverResponse\",\n            );\n            break;\n        }\n        this.isUploading = false;\n        await loading.dismiss(); // Dismiss the loader on error\n      },\n      async () => {\n        // Once the upload is complete, get the download URL\n        getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n          // console.log(\"File available at\", downloadURL);\n          this.uploadedFileURL = downloadURL;\n          // console.log(\"uploadedFileURL set to:\", this.uploadedFileURL);\n          // this.attachment = this.uploadedFileURL;\n        });\n        this.isUploading = false;\n        await loading.dismiss(); // Dismiss the loader on error\n      },\n    );\n  }\n\n  submitFeedback() {\n    if (this.feedbackForm.valid) {\n      const formData = this.feedbackForm.value;\n      this.firestoreService\n        .addDocument(\"feedback\", {\n          email: this.user?.email,\n          name: this.user?.displayName,\n          emailVerified: this.user?.emailVerified,\n          feedback: formData.feedback,\n          rating: formData.rating,\n          category: formData.category,\n          attachment: this.uploadedFileURL,\n          isRead: false,\n          isResolved: false,\n        } as Partial<AppFeedback>)\n        .then(() => {\n          this.modalCtrl.dismiss();\n        })\n        .catch((error) => {\n          this.errorHandler.handleFirebaseAuthError(error);\n        });\n    }\n  }\n\n  closeModal() {\n    this.modalCtrl.dismiss();\n  }\n}\n","<!--\nNonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\nCopyright (C) 2023  ASCENDynamics NFP\n\nThis file is part of Nonprofit Social Networking Platform.\n\nNonprofit Social Networking Platform is free software: you can redistribute it and/or modify\nit under the terms of the GNU Affero General Public License as published\nby the Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nNonprofit Social Networking Platform is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Affero General Public License for more details.\n\nYou should have received a copy of the GNU Affero General Public License\nalong with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n-->\n<ion-header>\n  <ion-toolbar>\n    <ion-title>Feedback</ion-title>\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"closeModal()\">Close</ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n  <form [formGroup]=\"feedbackForm\">\n    <ion-item *ngIf=\"!user || feedbackForm.get('name')?.invalid\">\n      <ion-label position=\"floating\">Name</ion-label>\n      <ion-input type=\"text\" formControlName=\"name\"></ion-input>\n      <ion-note *ngIf=\"feedbackForm.get('name')?.hasError('required')\">\n        Name is required.\n      </ion-note>\n    </ion-item>\n\n    <ion-item *ngIf=\"!user || feedbackForm.get('email')?.invalid\">\n      <ion-label position=\"floating\">Email</ion-label>\n      <ion-input type=\"email\" formControlName=\"email\"></ion-input>\n      <ion-note *ngIf=\"feedbackForm.get('email')?.hasError('required')\">\n        Email is required.\n      </ion-note>\n      <ion-note *ngIf=\"feedbackForm.get('email')?.hasError('email')\">\n        Please enter a valid email address.\n      </ion-note>\n    </ion-item>\n\n    <ion-item>\n      <ion-label>Category</ion-label>\n      <ion-select formControlName=\"category\">\n        <ion-select-option value=\"Bug Report\">Bug Report</ion-select-option>\n        <ion-select-option value=\"Feature Request\"\n          >Feature Request</ion-select-option\n        >\n        <ion-select-option value=\"General Feedback\"\n          >General Feedback</ion-select-option\n        >\n      </ion-select>\n    </ion-item>\n\n    <ion-item>\n      <ion-label>Feedback</ion-label>\n      <ion-textarea formControlName=\"feedback\"></ion-textarea>\n      <ion-note *ngIf=\"feedbackForm.get('feedback')?.hasError('required')\">\n        Feedback is required.\n      </ion-note>\n    </ion-item>\n\n    <ion-item>\n      <ion-label>Attachments</ion-label>\n      <input type=\"file\" (change)=\"onFileChange($event)\" />\n      <ion-note\n        *ngIf=\"feedbackForm.get('attachment')?.hasError('invalidImageType')\"\n      >\n        Please select a valid image file (JPEG, PNG, GIF).\n      </ion-note>\n      <ion-note\n        *ngIf=\"feedbackForm.get('attachment')?.hasError('invalidFileSize')\"\n      >\n        The file size should be less than 5MB.\n      </ion-note>\n    </ion-item>\n\n    <ion-item>\n      <ion-label>Rating</ion-label>\n      <ion-range formControlName=\"rating\" min=\"1\" max=\"5\" step=\"1\" snaps=\"true\">\n        <ion-icon size=\"small\" slot=\"start\" name=\"star-outline\"></ion-icon>\n        <ion-icon slot=\"end\" name=\"star\"></ion-icon>\n      </ion-range>\n    </ion-item>\n\n    <ion-button\n      [disabled]=\"isUploading || !feedbackForm.valid\"\n      expand=\"full\"\n      (click)=\"submitFeedback()\"\n      >Submit Feedback</ion-button\n    >\n  </form>\n</ion-content>\n","import {Component, OnInit} from \"@angular/core\";\nimport {HttpClient} from \"@angular/common/http\";\n\n@Component({\n  selector: \"app-funding-json\",\n  template: \"\",\n})\nexport class FundingJsonComponent implements OnInit {\n  constructor(private http: HttpClient) {}\n\n  ngOnInit(): void {\n    this.http.get(\"/funding.json\", {responseType: \"json\"}).subscribe({\n      next: (data) => {\n        const blob = new Blob([JSON.stringify(data)], {\n          type: \"application/json\",\n        });\n        const url = window.URL.createObjectURL(blob);\n        window.location.href = url;\n      },\n      error: (err) => {\n        console.error(\"Error fetching funding.json:\", err);\n      },\n    });\n  }\n}\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/shared/components/menu/menu.component.ts\n\nimport {Component, OnDestroy, OnInit} from \"@angular/core\";\nimport {Router} from \"@angular/router\";\nimport {ModalController} from \"@ionic/angular\";\nimport {AuthUser} from \"../../../models/auth-user.model\";\nimport {TranslateService} from \"@ngx-translate/core\";\nimport {Subscription, combineLatest} from \"rxjs\";\nimport {Store} from \"@ngrx/store\";\nimport {selectAuthUser} from \"../../../state/selectors/auth.selectors\";\nimport {FeedbackModalComponent} from \"../feedback-modal/feedback-modal.component\";\nimport {CreateGroupModalComponent} from \"../../../modules/account/components/create-group-modal/create-group-modal.component\";\n\nimport {MenuItem} from \"../../../shared/interfaces/menu-item.interface\";\n\n@Component({\n  selector: \"app-menu\",\n  templateUrl: \"./menu.component.html\",\n  styleUrls: [\"./menu.component.scss\"],\n})\nexport class MenuComponent implements OnInit, OnDestroy {\n  private subscriptions = new Subscription();\n  user: AuthUser | null = null;\n  menuPages: MenuItem[] = [];\n  project: MenuItem[] = [];\n\n  constructor(\n    private store: Store,\n    private translate: TranslateService,\n    private modalCtrl: ModalController,\n    private router: Router,\n  ) {}\n\n  ngOnInit() {\n    // Initialize project links\n    this.project = [\n      {\n        title: \"ASCENDynamics NFP\",\n        url: \"https://ascendynamics.org\",\n        icon: \"globe-outline\",\n      },\n      {\n        title: \"LinkedIn\",\n        url: \"https://www.linkedin.com/company/ascendynamics-nfp\",\n        icon: \"logo-linkedin\",\n      },\n      {\n        title: \"Facebook\",\n        url: \"https://www.facebook.com/ASCENDynamicsNFP\",\n        icon: \"logo-facebook\",\n      },\n      {\n        title: \"Slack Community\",\n        url: \"https://join.slack.com/t/ascendynamicsnfp/shared_invite/zt-1yqcw1hqa-slT2gWkBEkLOTRnN8zEqdQ\",\n        icon: \"logo-slack\",\n      },\n      {\n        title: \"YouTube Channel\",\n        url: \"https://www.youtube.com/channel/UCkR2Cgrjyi0QPeIKIXzxOvg\",\n        icon: \"logo-youtube\",\n      },\n      {\n        title: \"Donate\",\n        url: \"https://buy.stripe.com/bIY5mC9sY1ob4TufYY\",\n        icon: \"heart-sharp\",\n      },\n      {\n        title: \"Project Repository\",\n        url: \"https://github.com/ASCENDynamics-NFP/AscendCoopPlatform\",\n        icon: \"code-slash\",\n      },\n    ];\n\n    // Combine authUser and language change observables\n    const authUser$ = this.store.select(selectAuthUser);\n    const langChange$ = this.translate.onLangChange;\n\n    const menuPages$ = combineLatest([authUser$, langChange$]).subscribe(\n      ([authUser, langChange]) => {\n        this.user = authUser;\n        if (authUser) {\n          this.setUserMenuItems();\n        } else {\n          this.setGuestMenuItems();\n        }\n      },\n    );\n\n    this.subscriptions.add(menuPages$);\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n  private setGuestMenuItems() {\n    this.menuPages = [\n      {\n        title: this.translate.instant(\"menu.login\"),\n        url: \"/auth/login\",\n        icon: \"log-in\",\n      },\n      {\n        title: this.translate.instant(\"menu.signup\"),\n        url: \"/auth/signup\",\n        icon: \"person-add\",\n      },\n      // {\n      //   title: this.translate.instant(\"menu.groups\"),\n      //   url: \"/account/group-list\",\n      //   icon: \"business\",\n      // },\n    ];\n  }\n\n  private setUserMenuItems() {\n    this.menuPages = [\n      {\n        title: this.translate.instant(\"menu.profile\"),\n        url: `/account/${this.user?.uid}`,\n        icon: \"person\",\n      },\n      {\n        title: this.translate.instant(\"menu.listings\"),\n        url: \"/listings\",\n        icon: \"list\",\n        hasButton: true,\n        buttonLink: \"/listings/create\",\n        buttonText: this.translate.instant(\"menu.create\"),\n        buttonIcon: \"add\",\n      },\n      {\n        title: this.translate.instant(\"menu.groups\"),\n        url: \"/account/group-list\",\n        icon: \"business\",\n        // hasButton: true,\n        // buttonLink: \"create-group\",\n        // buttonText: this.translate.instant(\"menu.createGroup\"),\n        // buttonIcon: \"add\",\n      },\n      {\n        title: this.translate.instant(\"menu.users\"),\n        url: \"/account/users\",\n        icon: \"people\",\n      },\n      {\n        title: this.translate.instant(\"menu.settings\"),\n        url: \"/account/settings\",\n        icon: \"settings\",\n      },\n      // {\n      //   title: this.translate.instant(\"menu.dashboard\"),\n      //   url: `user-dashboard/${this.user?.uid}`,\n      //   icon: \"newspaper\",\n      // },\n    ];\n  }\n\n  // Handle button clicks in menu items\n  async handleButtonClick(buttonLink: string) {\n    if (!buttonLink) return;\n\n    if (buttonLink === \"create-group\") {\n      const modal = await this.modalCtrl.create({\n        component: CreateGroupModalComponent,\n      });\n      await modal.present();\n\n      const {data, role} = await modal.onWillDismiss();\n      if (role === \"confirm\" && data) {\n        this.router.navigate([`/${data.groupId}`]);\n      }\n    }\n  }\n\n  // Show feedback modal\n  async showFeedbackModal() {\n    const modal = await this.modalCtrl.create({\n      component: FeedbackModalComponent,\n      componentProps: {\n        user: this.user,\n      },\n    });\n    return await modal.present();\n  }\n}\n","<!--\nNonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\nCopyright (C) 2023  ASCENDynamics NFP\n\nThis file is part of Nonprofit Social Networking Platform.\n\nNonprofit Social Networking Platform is free software: you can redistribute it and/or modify\nit under the terms of the GNU Affero General Public License as published\nby the Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nNonprofit Social Networking Platform is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Affero General Public License for more details.\n\nYou should have received a copy of the GNU Affero General Public License\nalong with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n-->\n<!-- src/app/shared/components/menu/menu.component.html -->\n\n<ion-split-pane [disabled]=\"!user\" contentId=\"main-content\">\n  <ion-menu side=\"start\" contentId=\"main-content\" type=\"overlay\">\n    <ion-header>\n      <ion-toolbar class=\"menu-toolbar\">\n        <div class=\"toolbar-content\">\n          <img\n            src=\"assets/icon/logo.png\"\n            alt=\"ASCENDynamics Logo\"\n            class=\"toolbar-logo\"\n          />\n          <ion-title color=\"primary\" translate>menu.title</ion-title>\n        </div>\n      </ion-toolbar>\n    </ion-header>\n    <ion-content>\n      <ion-list>\n        <ion-menu-toggle auto-hide=\"false\">\n          <!-- Iterate over menuPages -->\n          <ng-container *ngFor=\"let item of menuPages\">\n            <ion-item\n              [routerLink]=\"item.url\"\n              lines=\"none\"\n              detail=\"false\"\n              routerLinkActive=\"selected\"\n              *ngIf=\"item.title\"\n            >\n              <ion-icon\n                aria-hidden=\"true\"\n                slot=\"start\"\n                [name]=\"item.icon\"\n              ></ion-icon>\n              <ion-label>{{ item.title }}</ion-label>\n              <!-- If the menu item has a button -->\n              <ion-button\n                *ngIf=\"item.hasButton\"\n                fill=\"outline\"\n                slot=\"end\"\n                [routerLink]=\"item.buttonLink\"\n                (click)=\"$event.stopPropagation()\"\n              >\n                {{ item.buttonText }}\n                <ion-icon\n                  aria-hidden=\"true\"\n                  slot=\"start\"\n                  [name]=\"item.buttonIcon\"\n                ></ion-icon>\n              </ion-button>\n            </ion-item>\n          </ng-container>\n          <!-- Feedback Item for Authenticated Users -->\n          <ion-item\n            *ngIf=\"user\"\n            style=\"cursor: pointer\"\n            lines=\"none\"\n            detail=\"false\"\n            (click)=\"showFeedbackModal()\"\n          >\n            <ion-icon\n              aria-hidden=\"true\"\n              slot=\"start\"\n              name=\"ear-outline\"\n            ></ion-icon>\n            <ion-label>Give Feedback</ion-label>\n          </ion-item>\n        </ion-menu-toggle>\n      </ion-list>\n      <!-- Project Links Section -->\n      <ion-list>\n        <ion-list-header>\n          <strong>ASCENDynamics NFP Information</strong>\n        </ion-list-header>\n        <ion-item\n          *ngFor=\"let p of project\"\n          lines=\"none\"\n          [href]=\"p.url\"\n          target=\"_blank\"\n          class=\"project-item\"\n        >\n          <ion-icon aria-hidden=\"true\" slot=\"start\" [name]=\"p.icon\"></ion-icon>\n          <ion-label>{{ p.title }}</ion-label>\n        </ion-item>\n      </ion-list>\n    </ion-content>\n  </ion-menu>\n  <ion-router-outlet id=\"main-content\"></ion-router-outlet>\n</ion-split-pane>\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/state/actions/account.actions.ts\n\nimport {createAction, props} from \"@ngrx/store\";\nimport {Account, RelatedAccount} from \"../../models/account.model\";\nimport {RelatedListing} from \"../../models/related-listing.model\";\n\nexport const clearAccountsState = createAction(\"[Account] Clear Accounts\");\n\n// Load Accounts\nexport const loadAccounts = createAction(\"[Account] Load Accounts\");\n\nexport const loadAccountsSuccess = createAction(\n  \"[Account] Load Accounts Success\",\n  props<{accounts: Account[]}>(),\n);\n\nexport const loadAccountsFailure = createAction(\n  \"[Account] Load Accounts Failure\",\n  props<{error: any}>(),\n);\n\n// Load Account by ID\nexport const loadAccount = createAction(\n  \"[Account] Load Account\",\n  props<{accountId: string}>(),\n);\n\nexport const loadAccountSuccess = createAction(\n  \"[Account] Load Account Success\",\n  props<{\n    account: Account;\n  }>(),\n);\n\nexport const loadAccountFailure = createAction(\n  \"[Account] Load Account Failure\",\n  props<{error: any}>(),\n);\n\n// Set Selected Account\nexport const setSelectedAccount = createAction(\n  \"[Account] Set Selected Account\",\n  props<{accountId: string}>(),\n);\n\n// Create Account\nexport const createAccount = createAction(\n  \"[Account] Create Account\",\n  props<{account: Account}>(),\n);\n\nexport const createAccountSuccess = createAction(\n  \"[Account] Create Account Success\",\n  props<{account: Account}>(),\n);\n\nexport const createAccountFailure = createAction(\n  \"[Account] Create Account Failure\",\n  props<{error: any}>(),\n);\n\n// Update Account\nexport const updateAccount = createAction(\n  \"[Account] Update Account\",\n  props<{account: Account}>(),\n);\n\nexport const updateAccountSuccess = createAction(\n  \"[Account] Update Account Success\",\n  props<{account: Account}>(),\n);\n\nexport const updateAccountFailure = createAction(\n  \"[Account] Update Account Failure\",\n  props<{error: any}>(),\n);\n\n// Delete Account\nexport const deleteAccount = createAction(\n  \"[Account] Delete Account\",\n  props<{accountId: string}>(),\n);\n\nexport const deleteAccountSuccess = createAction(\n  \"[Account] Delete Account Success\",\n  props<{accountId: string}>(),\n);\n\nexport const deleteAccountFailure = createAction(\n  \"[Account] Delete Account Failure\",\n  props<{error: any}>(),\n);\n\n// Search Accounts\nexport const searchAccounts = createAction(\n  \"[Account] Search Accounts\",\n  props<{query: string}>(),\n);\n\nexport const searchAccountsSuccess = createAction(\n  \"[Account] Search Accounts Success\",\n  props<{accounts: Account[]}>(),\n);\n\nexport const searchAccountsFailure = createAction(\n  \"[Account] Search Accounts Failure\",\n  props<{error: any}>(),\n);\n\n// Create Related Account\nexport const createRelatedAccount = createAction(\n  \"[Account] Create Related Account\",\n  props<{accountId: string; relatedAccount: RelatedAccount}>(),\n);\n\nexport const createRelatedAccountSuccess = createAction(\n  \"[Account] Create Related Account Success\",\n  props<{accountId: string; relatedAccount: RelatedAccount}>(),\n);\n\nexport const createRelatedAccountFailure = createAction(\n  \"[Account] Create Related Account Failure\",\n  props<{error: any}>(),\n);\n\n// Delete Related Account\nexport const deleteRelatedAccount = createAction(\n  \"[Account] Delete Related Account\",\n  props<{accountId: string; relatedAccountId: string}>(),\n);\n\nexport const deleteRelatedAccountSuccess = createAction(\n  \"[Account] Delete Related Account Success\",\n  props<{accountId: string; relatedAccountId: string}>(),\n);\n\nexport const deleteRelatedAccountFailure = createAction(\n  \"[Account] Delete Related Account Failure\",\n  props<{error: any}>(),\n);\n\n// Load Related Accounts\nexport const loadRelatedAccounts = createAction(\n  \"[Account] Load Related Accounts\",\n  props<{accountId: string}>(),\n);\n\nexport const loadRelatedAccountsSuccess = createAction(\n  \"[Account] Load Related Accounts Success\",\n  props<{accountId: string; relatedAccounts: RelatedAccount[]}>(),\n);\n\nexport const loadRelatedAccountsFailure = createAction(\n  \"[Account] Load Related Accounts Failure\",\n  props<{error: any}>(),\n);\n\n// Update Related Account\nexport const updateRelatedAccount = createAction(\n  \"[Account] Update Related Account\",\n  props<{accountId: string; relatedAccount: RelatedAccount}>(),\n);\n\nexport const updateRelatedAccountSuccess = createAction(\n  \"[Account] Update Related Account Success\",\n  props<{accountId: string; relatedAccount: RelatedAccount}>(),\n);\n\nexport const updateRelatedAccountFailure = createAction(\n  \"[Account] Update Related Account Failure\",\n  props<{error: any}>(),\n);\n\n// Load Related Listings\nexport const loadRelatedListings = createAction(\n  \"[Account] Load Related Listings\",\n  props<{accountId: string}>(),\n);\n\nexport const loadRelatedListingsSuccess = createAction(\n  \"[Account] Load Related Listings Success\",\n  props<{accountId: string; relatedListings: RelatedListing[]}>(),\n);\n\nexport const loadRelatedListingsFailure = createAction(\n  \"[Account] Load Related Listings Failure\",\n  props<{error: any}>(),\n);\n\nexport const deleteRelatedListing = createAction(\n  \"[Account] Delete Related Listing\",\n  props<{accountId: string; relatedListingId: string}>(),\n);\n\nexport const deleteRelatedListingSuccess = createAction(\n  \"[Account] Delete Related Listing Success\",\n  props<{accountId: string; relatedListingId: string}>(),\n);\n\nexport const deleteRelatedListingFailure = createAction(\n  \"[Account] Delete Related Listing Failure\",\n  props<{error: any}>(),\n);\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/core/store/auth/auth.actions.ts\n\nimport {createAction, props} from \"@ngrx/store\";\nimport {AuthUser} from \"../../models/auth-user.model\";\n\nexport const initializeAuth = createAction(\"[Auth] Initialize Auth\");\n\nexport const sendVerificationMail = createAction(\n  \"[Auth] Send Verification Mail\",\n  props<{email: string}>(),\n);\n\nexport const sendVerificationMailSuccess = createAction(\n  \"[Auth] Send Verification Mail Success\",\n);\n\nexport const sendVerificationMailFailure = createAction(\n  \"[Auth] Send Verification Mail Failure\",\n  props<{error: any}>(),\n);\n\nexport const signUp = createAction(\n  \"[Auth] Sign Up\",\n  props<{email: string; password: string}>(),\n);\n\nexport const signUpSuccess = createAction(\n  \"[Auth] Sign Up Success\",\n  props<{user: AuthUser}>(),\n);\n\nexport const signUpFailure = createAction(\n  \"[Auth] Sign Up Failure\",\n  props<{error: any}>(),\n);\n\nexport const signIn = createAction(\n  \"[Auth] Sign In\",\n  props<{email: string; password: string}>(),\n);\n\nexport const signInSuccess = createAction(\n  \"[Auth] Sign In Success\",\n  props<{uid: string}>(),\n);\n\nexport const signInFailure = createAction(\n  \"[Auth] Sign In Failure\",\n  props<{error: any}>(),\n);\n\nexport const signInWithGoogle = createAction(\"[Auth] Sign In With Google\");\n\nexport const signInWithGoogleSuccess = createAction(\n  \"[Auth] Sign In With Google Success\",\n  props<{user: AuthUser}>(),\n);\n\nexport const signInWithGoogleFailure = createAction(\n  \"[Auth] Sign In With Google Failure\",\n  props<{error: any}>(),\n);\n\nexport const signOut = createAction(\"[Auth] Sign Out\");\n\nexport const signOutSuccess = createAction(\"[Auth] Sign Out Success\");\n\nexport const signOutFailure = createAction(\n  \"[Auth] Sign Out Failure\",\n  props<{error: any}>(),\n);\n\nexport const sendPasswordResetEmail = createAction(\n  \"[Auth] Send Password Reset Email\",\n  props<{email: string}>(),\n);\n\nexport const sendPasswordResetEmailSuccess = createAction(\n  \"[Auth] Send Password Reset Email Success\",\n);\n\nexport const sendPasswordResetEmailFailure = createAction(\n  \"[Auth] Send Password Reset Email Failure\",\n  props<{error: any}>(),\n);\n\nexport const sendSignInLinkToEmail = createAction(\n  \"[Auth] Send Sign-In Link To Email\",\n  props<{email: string}>(),\n);\n\nexport const sendSignInLinkToEmailSuccess = createAction(\n  \"[Auth] Send Sign-In Link To Email Success\",\n);\n\nexport const sendSignInLinkToEmailFailure = createAction(\n  \"[Auth] Send Sign-In Link To Email Failure\",\n  props<{error: any}>(),\n);\n\nexport const confirmSignInWithEmailLink = createAction(\n  \"[Auth] Confirm Sign-In With Email Link\",\n  props<{url: string}>(),\n);\n\nexport const confirmSignInWithEmailLinkSuccess = createAction(\n  \"[Auth] Confirm Sign-In With Email Link Success\",\n  props<{user: AuthUser}>(),\n);\n\nexport const confirmSignInWithEmailLinkFailure = createAction(\n  \"[Auth] Confirm Sign-In With Email Link Failure\",\n  props<{error: any}>(),\n);\n\n// New Actions for Processing Sign-In Links\nexport const processSignInLink = createAction(\n  \"[Auth] Process Sign-In Link\",\n  props<{email: string; link: string}>(),\n);\n\nexport const processSignInLinkSuccess = createAction(\n  \"[Auth] Process Sign-In Link Success\",\n  props<{user: AuthUser}>(),\n);\n\nexport const processSignInLinkFailure = createAction(\n  \"[Auth] Process Sign-In Link Failure\",\n  props<{error: any}>(),\n);\n\nexport const updateAuthUser = createAction(\n  \"[Auth] Update Auth User\",\n  props<{user: Partial<AuthUser>}>(),\n);\n\nexport const updateAuthUserSuccess = createAction(\n  \"[Auth] Update Auth User Success\",\n  props<{user: AuthUser}>(),\n);\n\nexport const updateAuthUserFailure = createAction(\n  \"[Auth] Update Auth User Failure\",\n  props<{error: any}>(),\n);\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/state/listings/listings.actions.ts\n\nimport {createAction, props} from \"@ngrx/store\";\nimport {Listing} from \"../../models/listing.model\";\nimport {ListingRelatedAccount} from \"../../models/listing-related-account.model\";\n\nexport const loadListings = createAction(\"[Listings Page] Load Listings\");\n\nexport const clearListingsState = createAction(\"[Listings] Clear Listings\");\n\nexport const loadListingsSuccess = createAction(\n  \"[Listings API] Load Listings Success\",\n  props<{listings: Listing[]}>(),\n);\n\nexport const loadListingsFailure = createAction(\n  \"[Listings API] Load Listings Failure\",\n  props<{error: string}>(),\n);\n\nexport const loadListingById = createAction(\n  \"[Listing Detail Page] Load Listing By Id\",\n  props<{id: string}>(),\n);\n\nexport const loadListingByIdSuccess = createAction(\n  \"[Listings API] Load Listing By Id Success\",\n  props<{listing: Listing | null}>(), // Accept Listing or null\n);\n\nexport const loadListingByIdFailure = createAction(\n  \"[Listings API] Load Listing By Id Failure\",\n  props<{error: string}>(),\n);\n\nexport const updateListing = createAction(\n  \"[Listings API] Update Listing\",\n  props<{listing: Listing}>(),\n);\n\nexport const updateListingSuccess = createAction(\n  \"[Listings API] Update Listing Success\",\n  props<{listing: Listing}>(),\n);\n\nexport const updateListingFailure = createAction(\n  \"[Listings API] Update Listing Failure\",\n  props<{error: string}>(),\n);\n\nexport const createListing = createAction(\n  \"[Listings API] Create Listing\",\n  props<{listing: Listing}>(),\n);\n\nexport const createListingSuccess = createAction(\n  \"[Listings API] Create Listing Success\",\n  props<{listing: Listing}>(),\n);\n\nexport const createListingFailure = createAction(\n  \"[Listings API] Create Listing Failure\",\n  props<{error: string}>(),\n);\n\nexport const deleteListing = createAction(\n  \"[Listings API] Delete Listing\",\n  props<{id: string}>(),\n);\n\nexport const deleteListingSuccess = createAction(\n  \"[Listings API] Delete Listing Success\",\n  props<{id: string}>(),\n);\n\nexport const deleteListingFailure = createAction(\n  \"[Listings API] Delete Listing Failure\",\n  props<{error: string}>(),\n);\n\nexport const filterListings = createAction(\n  \"[Listings Page] Filter Listings\",\n  props<{listingType: string}>(),\n);\n\nexport const searchListings = createAction(\n  \"[Listings Page] Search Listings\",\n  props<{query: string}>(),\n);\n\n// Application Submission Actions\nexport const submitApplication = createAction(\n  \"[Listings] Submit Application\",\n  props<{relatedAccount: ListingRelatedAccount}>(),\n);\n\nexport const submitApplicationSuccess = createAction(\n  \"[Listings] Submit Application Success\",\n);\n\nexport const submitApplicationFailure = createAction(\n  \"[Listings] Submit Application Failure\",\n  props<{error: string}>(),\n);\n\nexport const loadListingRelatedAccounts = createAction(\n  \"[Listing] Load Related Accounts\",\n  props<{listingId: string}>(),\n);\n\nexport const loadListingRelatedAccountsSuccess = createAction(\n  \"[Listing] Load Related Accounts Success\",\n  props<{listingId: string; relatedAccounts: ListingRelatedAccount[]}>(),\n);\n\nexport const loadListingRelatedAccountsFailure = createAction(\n  \"[Listing] Load Related Accounts Failure\",\n  props<{listingId: string; error: any}>(),\n);\n\nexport const updateRelatedAccount = createAction(\n  \"[Listings] Update Related Account\",\n  props<{\n    listingId: string;\n    relatedAccount: ListingRelatedAccount;\n  }>(),\n);\n\nexport const updateRelatedAccountSuccess = createAction(\n  \"[Listings] Update Related Account Success\",\n  props<{listingId: string; relatedAccount: ListingRelatedAccount}>(),\n);\n\nexport const updateRelatedAccountFailure = createAction(\n  \"[Listings] Update Related Account Failure\",\n  props<{error: string}>(),\n);\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/state/effects/account.effects.ts\n\nimport {Injectable} from \"@angular/core\";\nimport {Actions, createEffect, ofType} from \"@ngrx/effects\";\nimport * as AccountActions from \"../actions/account.actions\";\nimport {EMPTY, from, of} from \"rxjs\";\nimport {\n  switchMap,\n  map,\n  catchError,\n  mergeMap,\n  withLatestFrom,\n  debounceTime,\n  take,\n  filter,\n} from \"rxjs/operators\";\nimport {FirestoreService} from \"../../core/services/firestore.service\";\nimport {Account} from \"../../models/account.model\";\nimport {RelatedListing} from \"../../models/related-listing.model\";\nimport {selectAuthUser} from \"../selectors/auth.selectors\";\nimport {Store} from \"@ngrx/store\";\nimport * as AuthActions from \"../actions/auth.actions\";\nimport {serverTimestamp} from \"@angular/fire/firestore\";\nimport {ToastController} from \"@ionic/angular\";\nimport {Router} from \"@angular/router\";\nimport {AppState} from \"../app.state\";\nimport {\n  selectAccountById,\n  selectAccountEntities,\n  selectAreAccountsFresh,\n  selectAreRelatedAccountsFresh,\n  selectAreRelatedListingsFresh,\n} from \"../selectors/account.selectors\";\n\n@Injectable()\nexport class AccountEffects {\n  constructor(\n    private actions$: Actions,\n    private firestoreService: FirestoreService,\n    private store: Store<AppState>,\n    private router: Router,\n    private toastController: ToastController,\n  ) {}\n\n  // Load Accounts only if not fresh\n  loadAccounts$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AccountActions.loadAccounts),\n      withLatestFrom(this.store.select(selectAreAccountsFresh)),\n      filter(([_, areFresh]) => !areFresh),\n      switchMap(() =>\n        this.firestoreService.getAllAccounts().pipe(\n          map((accounts) => AccountActions.loadAccountsSuccess({accounts})),\n          catchError((error) =>\n            of(\n              AccountActions.loadAccountsFailure({\n                error: error.message || error,\n              }),\n            ),\n          ),\n        ),\n      ),\n    ),\n  );\n\n  // Load Account by ID if it doesn't exist locally\n  loadAccount$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AccountActions.loadAccount),\n      mergeMap(({accountId}) =>\n        this.store.select(selectAccountById(accountId)).pipe(\n          take(1),\n          mergeMap((existingAccount) => {\n            if (existingAccount) {\n              return of({type: \"[Account] No Action\"});\n            } else {\n              return this.firestoreService\n                .getDocument<Account>(\"accounts\", accountId)\n                .pipe(\n                  map((account) => {\n                    if (!account) {\n                      throw new Error(\"Account not found\");\n                    }\n                    return AccountActions.loadAccountSuccess({account});\n                  }),\n                  catchError((error) => {\n                    this.showToast(\n                      `Error loading account: ${error.message}`,\n                      \"danger\",\n                    );\n                    return of(\n                      AccountActions.loadAccountFailure({error: error.message}),\n                    );\n                  }),\n                );\n            }\n          }),\n        ),\n      ),\n    ),\n  );\n\n  // Create Account\n  createAccount$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AccountActions.createAccount),\n      switchMap(({account}) => {\n        const newAccount = {\n          ...account,\n          createdAt: serverTimestamp(),\n          lastModifiedAt: serverTimestamp(),\n        };\n        return from(\n          this.firestoreService.addDocument(\"accounts\", newAccount),\n        ).pipe(\n          map((accountId) => {\n            this.router.navigate([`/accounts/${accountId}`]);\n            this.showToast(\"Account created successfully\", \"success\");\n            return AccountActions.createAccountSuccess({\n              account: {...newAccount, id: accountId},\n            });\n          }),\n          catchError((error) => {\n            this.showToast(\n              `Error creating account: ${error.message}`,\n              \"danger\",\n            );\n            return of(\n              AccountActions.createAccountFailure({error: error.message}),\n            );\n          }),\n        );\n      }),\n    ),\n  );\n\n  // Update Account\n  updateAccount$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AccountActions.updateAccount),\n      debounceTime(300),\n      switchMap(({account}) => {\n        const updatedAccount = {\n          ...account,\n          lastModifiedAt: serverTimestamp(),\n        };\n        return from(\n          this.firestoreService.updateDocument(\n            \"accounts\",\n            account.id,\n            updatedAccount,\n          ),\n        ).pipe(\n          map(() => {\n            this.showToast(\"Account updated successfully\", \"success\");\n            return AccountActions.updateAccountSuccess({\n              account: updatedAccount,\n            });\n          }),\n          catchError((error) => {\n            this.showToast(\n              `Error updating account: ${error.message}`,\n              \"danger\",\n            );\n            return of(\n              AccountActions.updateAccountFailure({error: error.message}),\n            );\n          }),\n        );\n      }),\n    ),\n  );\n\n  // Delete Account\n  deleteAccount$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AccountActions.deleteAccount),\n      switchMap(({accountId}) =>\n        from(this.firestoreService.deleteDocument(\"accounts\", accountId)).pipe(\n          map(() => {\n            this.router.navigate([\"/\"]);\n            this.showToast(\"Account deleted successfully\", \"success\");\n            return AccountActions.deleteAccountSuccess({accountId});\n          }),\n          catchError((error) => {\n            this.showToast(\n              `Error deleting account: ${error.message}`,\n              \"danger\",\n            );\n            return of(\n              AccountActions.deleteAccountFailure({error: error.message}),\n            );\n          }),\n        ),\n      ),\n    ),\n  );\n\n  // Search Accounts\n  searchAccounts$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AccountActions.searchAccounts),\n      debounceTime(300),\n      switchMap(({query}) =>\n        from(this.firestoreService.searchAccountByName(\"accounts\", query)).pipe(\n          map((accountsData) => {\n            const accounts: Account[] = (accountsData || []).map(\n              (accountData) => ({\n                ...(accountData as Account),\n              }),\n            );\n            this.showToast(`Found ${accounts.length} accounts`, \"success\");\n            return AccountActions.searchAccountsSuccess({accounts});\n          }),\n          catchError((error) => {\n            this.showToast(`Search failed: ${error.message}`, \"danger\");\n            return of(\n              AccountActions.searchAccountsFailure({error: error.message}),\n            );\n          }),\n        ),\n      ),\n    ),\n  );\n\n  // Create Related Account\n  createRelatedAccount$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AccountActions.createRelatedAccount),\n      switchMap(({accountId, relatedAccount}) => {\n        const newRelatedAccount = {\n          ...relatedAccount,\n          createdAt: serverTimestamp(),\n          lastModifiedAt: serverTimestamp(),\n        };\n        return from(\n          this.firestoreService.setDocument(\n            `accounts/${accountId}/relatedAccounts/${relatedAccount.id}`,\n            newRelatedAccount,\n          ),\n        ).pipe(\n          map(() => {\n            this.showToast(\"Request successful\", \"success\");\n            return AccountActions.createRelatedAccountSuccess({\n              accountId,\n              relatedAccount: newRelatedAccount,\n            });\n          }),\n          catchError((error) => {\n            this.showToast(\n              `Failed to create related account: ${error.message}`,\n              \"danger\",\n            );\n            return of(\n              AccountActions.createRelatedAccountFailure({\n                error: error.message,\n              }),\n            );\n          }),\n        );\n      }),\n    ),\n  );\n\n  // Delete Related Account\n  deleteRelatedAccount$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AccountActions.deleteRelatedAccount),\n      mergeMap(({accountId, relatedAccountId}) =>\n        from(\n          this.firestoreService.deleteDocumentAtPath(\n            `accounts/${accountId}/relatedAccounts/${relatedAccountId}`,\n          ),\n        ).pipe(\n          map(() => {\n            this.showToast(\"Removed successfully\", \"success\");\n            return AccountActions.deleteRelatedAccountSuccess({\n              accountId,\n              relatedAccountId,\n            });\n          }),\n          catchError((error) => {\n            this.showToast(\n              `Failed to remove related account: ${error.message}`,\n              \"danger\",\n            );\n            return of(\n              AccountActions.deleteRelatedAccountFailure({\n                error: error.message,\n              }),\n            );\n          }),\n        ),\n      ),\n    ),\n  );\n\n  // Load Related Accounts if not fresh\n  loadRelatedAccounts$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AccountActions.loadRelatedAccounts),\n      mergeMap(({accountId}) =>\n        this.store.select(selectAreRelatedAccountsFresh(accountId)).pipe(\n          take(1),\n          filter((areFresh) => !areFresh),\n          switchMap(() =>\n            this.firestoreService.getRelatedAccounts(accountId).pipe(\n              map((relatedAccounts) =>\n                AccountActions.loadRelatedAccountsSuccess({\n                  accountId,\n                  relatedAccounts,\n                }),\n              ),\n              catchError((error) => {\n                this.showToast(\n                  `Error loading related accounts: ${error.message}`,\n                  \"danger\",\n                );\n                return of(\n                  AccountActions.loadRelatedAccountsFailure({\n                    error: error.message,\n                  }),\n                );\n              }),\n            ),\n          ),\n        ),\n      ),\n    ),\n  );\n\n  // Update Related Account\n  updateRelatedAccount$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AccountActions.updateRelatedAccount),\n      debounceTime(300),\n      switchMap(({accountId, relatedAccount}) => {\n        const updatedRelatedAccount = {\n          ...relatedAccount,\n          lastModifiedAt: serverTimestamp(),\n        };\n        return from(\n          this.firestoreService.updateDocument(\n            `accounts/${accountId}/relatedAccounts`,\n            relatedAccount.id,\n            updatedRelatedAccount,\n          ),\n        ).pipe(\n          map(() => {\n            this.showToast(\"Updated successfully\", \"success\");\n            return AccountActions.updateRelatedAccountSuccess({\n              accountId,\n              relatedAccount: updatedRelatedAccount,\n            });\n          }),\n          catchError((error) => {\n            this.showToast(`Update failed: ${error.message}`, \"danger\");\n            return of(\n              AccountActions.updateRelatedAccountFailure({\n                error: error.message,\n              }),\n            );\n          }),\n        );\n      }),\n    ),\n  );\n\n  // Load Related Listings if not fresh\n  loadRelatedListings$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AccountActions.loadRelatedListings),\n      mergeMap(({accountId}) =>\n        this.store.select(selectAreRelatedListingsFresh(accountId)).pipe(\n          take(1),\n          filter((areFresh) => !areFresh),\n          switchMap(() =>\n            this.firestoreService\n              .getDocuments<RelatedListing>(\n                `accounts/${accountId}/relatedListings`,\n              )\n              .pipe(\n                map((relatedListings) =>\n                  AccountActions.loadRelatedListingsSuccess({\n                    accountId,\n                    relatedListings,\n                  }),\n                ),\n                catchError((error) => {\n                  this.showToast(\n                    `Error loading related listings: ${error.message}`,\n                    \"danger\",\n                  );\n                  return of(\n                    AccountActions.loadRelatedListingsFailure({\n                      error: error.message,\n                    }),\n                  );\n                }),\n              ),\n          ),\n        ),\n      ),\n    ),\n  );\n\n  // Sync Auth User with Account after a successful load\n  syncAuthUserWithAccount$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AccountActions.loadAccountSuccess),\n      withLatestFrom(this.store.select(selectAuthUser)),\n      map(([{account}, authUser]) => {\n        if (authUser?.uid && account.id && authUser.uid === account.id) {\n          return AuthActions.updateAuthUser({\n            user: {\n              displayName: account.name,\n              heroImage: account.heroImage,\n              iconImage: account.iconImage,\n              tagline: account.tagline,\n              type: account.type,\n              settings: account.settings,\n            },\n          });\n        }\n        return {type: \"[Account] No Action\"};\n      }),\n    ),\n  );\n\n  // Set Selected Account\n  setSelectedAccount$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AccountActions.setSelectedAccount),\n      withLatestFrom(this.store.select(selectAccountEntities)),\n      mergeMap(([action, entities]) => {\n        const accountExists = !!entities[action.accountId];\n        if (!accountExists) {\n          return of(AccountActions.loadAccount({accountId: action.accountId}));\n        }\n        return EMPTY;\n      }),\n    ),\n  );\n\n  // Delete Related Listing\n  deleteRelatedListing$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AccountActions.deleteRelatedListing),\n      mergeMap(({accountId, relatedListingId}) =>\n        from(\n          this.firestoreService.deleteDocumentAtPath(\n            `accounts/${accountId}/relatedListings/${relatedListingId}`,\n          ),\n        ).pipe(\n          map(() => {\n            this.showToast(\"Removed successfully\", \"success\");\n            return AccountActions.deleteRelatedListingSuccess({\n              accountId,\n              relatedListingId,\n            });\n          }),\n          catchError((error) => {\n            this.showToast(\n              `Failed to remove related listing: ${error.message}`,\n              \"danger\",\n            );\n            return of(\n              AccountActions.deleteRelatedListingFailure({\n                error: error.message,\n              }),\n            );\n          }),\n        ),\n      ),\n    ),\n  );\n\n  private showToast(message: string, color: string) {\n    this.toastController\n      .create({\n        message,\n        duration: 2000,\n        color,\n      })\n      .then((toast) => toast.present());\n  }\n}\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/state/effects/auth.effects.ts\n\nimport {Injectable} from \"@angular/core\";\nimport {Actions, createEffect, ofType} from \"@ngrx/effects\";\nimport * as AuthActions from \"../actions/auth.actions\";\nimport * as AccountActions from \"../actions/account.actions\";\nimport * as ListingsActions from \"../actions/listings.actions\";\nimport {\n  Auth,\n  getAuth,\n  signInWithEmailLink,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signInWithPopup,\n  GoogleAuthProvider,\n  signOut,\n  sendPasswordResetEmail,\n  sendSignInLinkToEmail,\n  isSignInWithEmailLink,\n  User,\n} from \"firebase/auth\";\nimport {\n  catchError,\n  from,\n  map,\n  switchMap,\n  of,\n  tap,\n  exhaustMap,\n  withLatestFrom,\n  Observable,\n  take,\n} from \"rxjs\";\nimport {ErrorHandlerService} from \"../../core/services/error-handler.service\";\nimport {SuccessHandlerService} from \"../../core/services/success-handler.service\";\nimport {Router} from \"@angular/router\";\nimport {AlertController, LoadingController} from \"@ionic/angular\";\nimport {AuthUser} from \"../../models/auth-user.model\";\nimport {selectAuthUser} from \"../selectors/auth.selectors\";\nimport {Store} from \"@ngrx/store\";\nimport {AuthState} from \"../reducers/auth.reducer\";\nimport {Settings} from \"../../models/account.model\";\nimport {selectAccountById} from \"../selectors/account.selectors\";\n\n@Injectable()\nexport class AuthEffects {\n  private auth: Auth = getAuth();\n  private actionCodeSettings = {\n    url: `${window.location.origin}/auth/login`,\n    handleCodeInApp: true,\n  };\n\n  constructor(\n    private actions$: Actions,\n    private errorHandler: ErrorHandlerService,\n    private successHandler: SuccessHandlerService,\n    private router: Router,\n    private alertController: AlertController,\n    private loadingController: LoadingController,\n    private store: Store<{auth: AuthState}>,\n  ) {}\n\n  // Initialize Auth and Process Sign-In Link\n  initializeAuth$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AuthActions.initializeAuth),\n      switchMap(() => {\n        const url = window.location.href;\n        if (isSignInWithEmailLink(this.auth, url)) {\n          const email = window.localStorage.getItem(\"emailForSignIn\");\n          if (email) {\n            return of(AuthActions.processSignInLink({email, link: url}));\n          } else {\n            return from(this.promptForEmail()).pipe(\n              switchMap((email) => {\n                if (email) {\n                  return of(AuthActions.processSignInLink({email, link: url}));\n                } else {\n                  return of(\n                    AuthActions.processSignInLinkFailure({\n                      error: \"Email is required to complete sign-in.\",\n                    }),\n                  );\n                }\n              }),\n              catchError((error) =>\n                of(AuthActions.processSignInLinkFailure({error})),\n              ),\n            );\n          }\n        } else {\n          return of({type: \"NO_ACTION\"});\n        }\n      }),\n    ),\n  );\n\n  // Helper method to prompt the user for their email\n  private async promptForEmail(): Promise<string | null> {\n    const alert = await this.alertController.create({\n      header: \"Email Required\",\n      message: \"Please enter your email to complete sign-in.\",\n      inputs: [\n        {\n          name: \"email\",\n          type: \"email\",\n          placeholder: \"Enter your email\",\n        },\n      ],\n      buttons: [\n        {\n          text: \"Cancel\",\n          role: \"cancel\",\n        },\n        {\n          text: \"Submit\",\n          handler: (data) => {\n            if (data.email) {\n              window.localStorage.setItem(\"emailForSignIn\", data.email);\n              return data.email;\n            } else {\n              return null;\n            }\n          },\n        },\n      ],\n    });\n\n    await alert.present();\n\n    return new Promise((resolve) => {\n      alert.onDidDismiss().then((result) => {\n        if (result.role === \"cancel\") {\n          resolve(null);\n        } else {\n          resolve(result.data?.values?.email || null);\n        }\n      });\n    });\n  }\n\n  // Process Sign-In Link and Load Account\n  processSignInLink$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AuthActions.processSignInLink),\n      switchMap(({email, link}) =>\n        from(signInWithEmailLink(this.auth, email, link)).pipe(\n          tap(() => {\n            this.successHandler.handleSuccess(\n              \"Successfully signed in with email link!\",\n            );\n          }),\n          switchMap(async (result) => {\n            const idTokenResult = await result.user.getIdTokenResult();\n            return {user: result.user, claims: idTokenResult.claims};\n          }),\n          switchMap(({user, claims}) =>\n            this.createAuthUserFromClaims(user, claims).pipe(\n              map((authUser) => {\n                this.store.dispatch(\n                  AuthActions.updateAuthUser({user: authUser}),\n                );\n                return AuthActions.signInSuccess({uid: authUser.uid});\n              }),\n            ),\n          ),\n          catchError((error) => {\n            this.errorHandler.handleFirebaseAuthError(error);\n            return of(AuthActions.processSignInLinkFailure({error}));\n          }),\n        ),\n      ),\n    ),\n  );\n\n  // Sign-Up Effect\n  signUp$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AuthActions.signUp),\n      switchMap(({email, password}) =>\n        from(createUserWithEmailAndPassword(this.auth, email, password)).pipe(\n          tap((result) => {\n            this.successHandler.handleSuccess(\"Successfully signed up!\");\n            this.router.navigateByUrl(\n              `/account/registration/${result.user.uid}`,\n              {replaceUrl: true},\n            );\n          }),\n          switchMap(async (result) => {\n            const idTokenResult = await result.user.getIdTokenResult();\n            return {user: result.user, claims: idTokenResult.claims};\n          }),\n          switchMap(({user, claims}) =>\n            this.createAuthUserFromClaims(user, claims).pipe(\n              map((authUser) => {\n                this.store.dispatch(\n                  AuthActions.updateAuthUser({user: authUser}),\n                );\n                return AuthActions.signUpSuccess({user: authUser});\n              }),\n            ),\n          ),\n          catchError((error) => {\n            this.errorHandler.handleFirebaseAuthError(error);\n            return of(AuthActions.signUpFailure({error}));\n          }),\n        ),\n      ),\n    ),\n  );\n\n  // Sign-In Effect\n  signIn$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AuthActions.signIn),\n      switchMap(({email, password}) =>\n        from(signInWithEmailAndPassword(this.auth, email, password)).pipe(\n          tap(() => {\n            this.successHandler.handleSuccess(\"Successfully signed in!\");\n          }),\n          switchMap(async (result) => {\n            const idTokenResult = await result.user.getIdTokenResult();\n            return {user: result.user, claims: idTokenResult.claims};\n          }),\n          switchMap(({user, claims}) =>\n            this.createAuthUserFromClaims(user, claims).pipe(\n              map((authUser) => {\n                this.store.dispatch(\n                  AuthActions.updateAuthUser({user: authUser}),\n                );\n                return AuthActions.signInSuccess({uid: authUser.uid});\n              }),\n            ),\n          ),\n          catchError((error) => {\n            this.errorHandler.handleFirebaseAuthError(error);\n            return of(AuthActions.signInFailure({error}));\n          }),\n        ),\n      ),\n    ),\n  );\n\n  // Sign-In with Google Effect\n  signInWithGoogle$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AuthActions.signInWithGoogle),\n      switchMap(() =>\n        from(signInWithPopup(this.auth, new GoogleAuthProvider())).pipe(\n          tap(() => {\n            this.successHandler.handleSuccess(\n              \"Successfully signed in with Google!\",\n            );\n          }),\n          switchMap(async (result) => {\n            const idTokenResult = await result.user.getIdTokenResult();\n            return {user: result.user, claims: idTokenResult.claims};\n          }),\n          switchMap(({user, claims}) =>\n            this.createAuthUserFromClaims(user, claims).pipe(\n              map((authUser) => {\n                this.store.dispatch(\n                  AuthActions.updateAuthUser({user: authUser}),\n                );\n                return AuthActions.signInSuccess({uid: authUser.uid});\n              }),\n            ),\n          ),\n          catchError((error) => {\n            this.errorHandler.handleFirebaseAuthError(error);\n            return of(AuthActions.signInWithGoogleFailure({error}));\n          }),\n        ),\n      ),\n    ),\n  );\n\n  // Sign-In Success Effect: Navigate to Account Page\n  signInSuccess$ = createEffect(\n    () =>\n      this.actions$.pipe(\n        ofType(AuthActions.signInSuccess),\n        tap(({uid}) => {\n          this.router.navigateByUrl(`/account/${uid}`, {replaceUrl: true});\n        }),\n      ),\n    {dispatch: false},\n  );\n\n  // Sign-Out Effect\n  signOut$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AuthActions.signOut),\n      switchMap(() =>\n        from(signOut(this.auth)).pipe(\n          tap(() => {\n            this.successHandler.handleSuccess(\"You have been signed out!\");\n            this.router.navigate([\"auth\"]);\n          }),\n          switchMap(() => [\n            AuthActions.signOutSuccess(),\n            AccountActions.clearAccountsState(),\n            ListingsActions.clearListingsState(),\n          ]),\n          catchError((error) => {\n            this.errorHandler.handleFirebaseAuthError(error);\n            return of(AuthActions.signOutFailure({error}));\n          }),\n        ),\n      ),\n    ),\n  );\n\n  // Send Password Reset Email Effect\n  sendPasswordResetEmail$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AuthActions.sendPasswordResetEmail),\n      switchMap(({email}) =>\n        from(sendPasswordResetEmail(this.auth, email)).pipe(\n          tap(() => {\n            this.successHandler.handleSuccess(\n              \"Please check your email for further instructions!\",\n            );\n          }),\n          map(() => AuthActions.sendPasswordResetEmailSuccess()),\n          catchError((error) => {\n            this.errorHandler.handleFirebaseAuthError(error);\n            return of(AuthActions.sendPasswordResetEmailFailure({error}));\n          }),\n        ),\n      ),\n    ),\n  );\n\n  // Send Verification Mail Effect\n  sendVerificationMail$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AuthActions.sendVerificationMail),\n      switchMap(({email}) =>\n        from(\n          sendSignInLinkToEmail(this.auth, email, this.actionCodeSettings),\n        ).pipe(\n          tap(() => {\n            this.successHandler.handleSuccess(\n              `Verification email sent to ${email}! Please check your inbox.`,\n              30000,\n            );\n          }),\n          map(() => AuthActions.sendVerificationMailSuccess()),\n          catchError((error) => {\n            this.errorHandler.handleFirebaseAuthError(error);\n            return of(AuthActions.sendVerificationMailFailure({error}));\n          }),\n        ),\n      ),\n    ),\n  );\n\n  // Send Sign-In Link to Email Effect\n  sendSignInLinkToEmail$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AuthActions.sendSignInLinkToEmail),\n      exhaustMap(({email}) =>\n        from(this.loadingController.create()).pipe(\n          tap((loading) => loading.present()),\n          switchMap((loading) =>\n            from(\n              sendSignInLinkToEmail(this.auth, email, this.actionCodeSettings),\n            ).pipe(\n              tap(() => {\n                window.localStorage.setItem(\"emailForSignIn\", email);\n              }),\n              map(() => {\n                loading.dismiss();\n                return AuthActions.sendSignInLinkToEmailSuccess();\n              }),\n              catchError((error) => {\n                loading.dismiss();\n                this.errorHandler.handleFirebaseAuthError(error);\n                return of(AuthActions.sendSignInLinkToEmailFailure({error}));\n              }),\n            ),\n          ),\n        ),\n      ),\n    ),\n  );\n\n  // Success Alert for Sign-In Link\n  sendSignInLinkToEmailSuccess$ = createEffect(\n    () =>\n      this.actions$.pipe(\n        ofType(AuthActions.sendSignInLinkToEmailSuccess),\n        tap(async () => {\n          const alert = await this.alertController.create({\n            header: \"Email Sent\",\n            message: \"A sign-in link has been sent to your email address.\",\n            buttons: [\"OK\"],\n          });\n          await alert.present();\n        }),\n      ),\n    {dispatch: false},\n  );\n\n  // Failure Alert for Sign-In Link\n  sendSignInLinkToEmailFailure$ = createEffect(\n    () =>\n      this.actions$.pipe(\n        ofType(AuthActions.sendSignInLinkToEmailFailure),\n        tap(async ({error}) => {\n          const alert = await this.alertController.create({\n            header: \"Error\",\n            message: `Failed to send sign-in link: ${error.message || error}`,\n            buttons: [\"OK\"],\n          });\n          await alert.present();\n        }),\n      ),\n    {dispatch: false},\n  );\n\n  // Update Auth User Effect\n  updateAuthUser$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AuthActions.updateAuthUser),\n      withLatestFrom(this.store.select(selectAuthUser)),\n      map(([{user}, currentUser]) => ({\n        user: {...currentUser, ...user} as AuthUser,\n      })),\n      map(({user}) => AuthActions.updateAuthUserSuccess({user})),\n      catchError((error) => of(AuthActions.updateAuthUserFailure({error}))),\n    ),\n  );\n\n  // Helper method to create AuthUser from claims and account data\n  private createAuthUserFromClaims(\n    user: User,\n    claims: any,\n  ): Observable<AuthUser> {\n    return this.store.select(selectAccountById(user.uid)).pipe(\n      take(1),\n      map((account) => {\n        // Handle undefined account\n        const defaultIconImage = user.photoURL || \"src/assets/avatar/male1.png\";\n        const defaultHeroImage = \"src/assets/image/orghero.png\";\n        const defaultTagline = \"Helping others at ASCENDynamics NFP.\";\n        const defaultSettings: Settings = {\n          language: \"en\",\n          theme: \"system\",\n        };\n        return {\n          uid: user.uid,\n          email: user.email,\n          emailVerified: user.emailVerified,\n          displayName:\n            (claims[\"displayName\"] as string) ||\n            account?.name ||\n            user.displayName,\n          iconImage:\n            (claims[\"iconImage\"] as string) ||\n            account?.iconImage ||\n            defaultIconImage,\n          heroImage:\n            (claims[\"heroImage\"] as string) ||\n            account?.heroImage ||\n            defaultHeroImage,\n          tagline:\n            (claims[\"tagline\"] as string) || account?.tagline || defaultTagline,\n          type: (claims[\"type\"] as string) || account?.type || \"\",\n          createdAt: user.metadata.creationTime\n            ? new Date(user.metadata.creationTime)\n            : new Date(),\n          lastLoginAt: user.metadata.lastSignInTime\n            ? new Date(user.metadata.lastSignInTime)\n            : new Date(),\n          phoneNumber:\n            user.phoneNumber ||\n            account?.contactInformation?.phoneNumbers?.[0]?.number ||\n            null,\n          providerData: user.providerData,\n          settings:\n            (claims[\"settings\"] as Settings) ||\n            account?.settings ||\n            defaultSettings,\n        };\n      }),\n    );\n  }\n}\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/state/reducers/account.reducer.ts\n\nimport {createReducer, on} from \"@ngrx/store\";\nimport * as AccountActions from \"../actions/account.actions\";\nimport {Account, RelatedAccount} from \"../../models/account.model\";\nimport {RelatedListing} from \"../../models/related-listing.model\";\n\nexport interface AccountState {\n  entities: {[id: string]: Account};\n  relatedAccounts: {[accountId: string]: RelatedAccount[]};\n  relatedListings: {[accountId: string]: RelatedListing[]};\n  selectedAccountId: string | null;\n  loading: boolean;\n  error: any;\n\n  // Timestamps for cache invalidation\n  accountsLastUpdated: number | null;\n  relatedAccountsLastUpdated: {[accountId: string]: number | null};\n  relatedListingsLastUpdated: {[accountId: string]: number | null};\n}\n\nexport const initialState: AccountState = {\n  entities: {},\n  relatedAccounts: {},\n  relatedListings: {},\n  selectedAccountId: null,\n  loading: false,\n  error: null,\n  // Timestamps for cache invalidation\n  accountsLastUpdated: null,\n  relatedAccountsLastUpdated: {},\n  relatedListingsLastUpdated: {},\n};\n\nexport const accountReducer = createReducer(\n  initialState,\n\n  // Clear Account State\n  on(AccountActions.clearAccountsState, () => ({\n    ...initialState,\n  })),\n\n  // Load Accounts\n  on(AccountActions.loadAccounts, (state) => ({\n    ...state,\n    loading: true,\n    error: null,\n  })),\n  on(AccountActions.loadAccountsSuccess, (state, {accounts}) => ({\n    ...state,\n    entities: accounts.reduce(\n      (entities: {[id: string]: Account}, account) => ({\n        ...entities,\n        [account.id]: account,\n      }),\n      {},\n    ),\n    loading: false,\n    accountsLastUpdated: Date.now(),\n  })),\n  on(AccountActions.loadAccountsFailure, (state, {error}) => ({\n    ...state,\n    loading: false,\n    error,\n  })),\n\n  // Load Account\n  on(AccountActions.loadAccount, (state) => ({\n    ...state,\n    loading: true,\n    error: null,\n  })),\n  on(AccountActions.loadAccountSuccess, (state, {account}) => ({\n    ...state,\n    entities: {\n      ...state.entities,\n      [account.id]: account,\n    },\n    selectedAccountId: account.id,\n    loading: false,\n    error: null,\n  })),\n  on(AccountActions.loadAccountFailure, (state, {error}) => ({\n    ...state,\n    loading: false,\n    error,\n  })),\n\n  // Create Account\n  on(AccountActions.createAccountSuccess, (state, {account}) => ({\n    ...state,\n    entities: {\n      ...state.entities,\n      [account.id]: account,\n    },\n  })),\n\n  // Update Account\n  on(AccountActions.updateAccountSuccess, (state, {account}) => ({\n    ...state,\n    entities: {\n      ...state.entities,\n      [account.id]: account,\n    },\n  })),\n\n  // Delete Account\n  on(AccountActions.deleteAccountSuccess, (state, {accountId}) => {\n    const {[accountId]: removedAccount, ...entities} = state.entities;\n    const {[accountId]: removedRelatedAccounts, ...relatedAccounts} =\n      state.relatedAccounts;\n    const {[accountId]: removedRelatedListings, ...relatedListings} =\n      state.relatedListings;\n\n    return {\n      ...state,\n      entities,\n      relatedAccounts,\n      relatedListings,\n    };\n  }),\n\n  // Set Selected Account\n  on(AccountActions.setSelectedAccount, (state, {accountId}) => ({\n    ...state,\n    selectedAccountId: accountId,\n  })),\n\n  // Load Related Accounts\n  on(AccountActions.loadRelatedAccounts, (state) => ({\n    ...state,\n    loading: true,\n  })),\n  on(\n    AccountActions.loadRelatedAccountsSuccess,\n    (state, {accountId, relatedAccounts}) => ({\n      ...state,\n      relatedAccounts: {\n        ...state.relatedAccounts,\n        [accountId]: relatedAccounts,\n      },\n      relatedAccountsLastUpdated: {\n        ...state.relatedAccountsLastUpdated,\n        [accountId]: Date.now(),\n      },\n      loading: false,\n    }),\n  ),\n  on(AccountActions.loadRelatedAccountsFailure, (state, {error}) => ({\n    ...state,\n    error,\n    loading: false,\n  })),\n\n  // Create Related Account\n  on(\n    AccountActions.createRelatedAccountSuccess,\n    (state, {accountId, relatedAccount}) => ({\n      ...state,\n      relatedAccounts: {\n        ...state.relatedAccounts,\n        [accountId]: [\n          ...(state.relatedAccounts[accountId] || []),\n          relatedAccount,\n        ],\n      },\n    }),\n  ),\n\n  // Update Related Account\n  on(\n    AccountActions.updateRelatedAccountSuccess,\n    (state, {accountId, relatedAccount}) => ({\n      ...state,\n      relatedAccounts: {\n        ...state.relatedAccounts,\n        [accountId]: state.relatedAccounts[accountId].map((ra) =>\n          ra.id === relatedAccount.id ? relatedAccount : ra,\n        ),\n      },\n    }),\n  ),\n\n  // Delete Related Account\n  on(\n    AccountActions.deleteRelatedAccountSuccess,\n    (state, {accountId, relatedAccountId}) => ({\n      ...state,\n      relatedAccounts: {\n        ...state.relatedAccounts,\n        [accountId]: state.relatedAccounts[accountId].filter(\n          (ra) => ra.id !== relatedAccountId,\n        ),\n      },\n    }),\n  ),\n\n  // Load Related Listings\n  on(AccountActions.loadRelatedListings, (state) => ({\n    ...state,\n    loading: true,\n  })),\n  on(\n    AccountActions.loadRelatedListingsSuccess,\n    (state, {accountId, relatedListings}) => ({\n      ...state,\n      relatedListings: {\n        ...state.relatedListings,\n        [accountId]: relatedListings,\n      },\n      relatedListingsLastUpdated: {\n        ...state.relatedListingsLastUpdated,\n        [accountId]: Date.now(),\n      },\n      loading: false,\n    }),\n  ),\n  on(AccountActions.loadRelatedListingsFailure, (state, {error}) => ({\n    ...state,\n    error,\n    loading: false,\n  })),\n);\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/state/reducers/auth.reducer.ts\n\nimport {createReducer, on} from \"@ngrx/store\";\nimport * as AuthActions from \"../actions/auth.actions\";\nimport {AuthUser} from \"../../models/auth-user.model\";\n\nexport interface AuthState {\n  user: AuthUser | null;\n  error: any;\n  loading: boolean;\n}\n\nexport const initialState: AuthState = {\n  user: null,\n  error: null,\n  loading: false,\n};\n\nexport const authReducer = createReducer(\n  initialState,\n\n  // Start Loading Actions\n  on(\n    AuthActions.signUp,\n    AuthActions.signIn,\n    AuthActions.signInWithGoogle,\n    AuthActions.signOut,\n    AuthActions.sendPasswordResetEmail,\n    AuthActions.sendSignInLinkToEmail,\n    AuthActions.confirmSignInWithEmailLink,\n    AuthActions.processSignInLink,\n    AuthActions.initializeAuth,\n    AuthActions.updateAuthUser,\n    (state) => ({\n      ...state,\n      loading: true,\n      error: null,\n    }),\n  ),\n\n  // Success Actions\n  on(\n    AuthActions.signUpSuccess,\n    AuthActions.signInWithGoogleSuccess,\n    AuthActions.confirmSignInWithEmailLinkSuccess,\n    AuthActions.processSignInLinkSuccess,\n    AuthActions.updateAuthUserSuccess,\n    (state, {user}) => ({\n      ...state,\n      user,\n      loading: false,\n      error: null,\n    }),\n  ),\n\n  on(AuthActions.signInSuccess, (state, {uid}) => ({\n    ...state,\n    uid: uid,\n    error: null,\n    loading: false,\n  })),\n\n  on(AuthActions.signOutSuccess, () => ({\n    ...initialState,\n  })),\n\n  on(\n    AuthActions.sendPasswordResetEmailSuccess,\n    AuthActions.sendSignInLinkToEmailSuccess,\n    (state) => ({\n      ...state,\n      loading: false,\n      error: null,\n    }),\n  ),\n\n  // Failure Actions\n  on(\n    AuthActions.signUpFailure,\n    AuthActions.signInFailure,\n    AuthActions.signInWithGoogleFailure,\n    AuthActions.signOutFailure,\n    AuthActions.sendPasswordResetEmailFailure,\n    AuthActions.sendSignInLinkToEmailFailure,\n    AuthActions.confirmSignInWithEmailLinkFailure,\n    AuthActions.processSignInLinkFailure,\n    AuthActions.updateAuthUserFailure,\n    (state, {error}) => ({\n      ...state,\n      loading: false,\n      error,\n    }),\n  ),\n);\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/state/reducers/index.ts\n\nimport {ActionReducerMap} from \"@ngrx/store\";\nimport {AuthState, authReducer} from \"./auth.reducer\";\nimport {AccountState, accountReducer} from \"./account.reducer\";\nimport {ListingsState, listingsReducer} from \"./listings.reducer\";\n// Other imports...\n\nexport interface AppState {\n  auth: AuthState;\n  accounts: AccountState;\n  listings: ListingsState;\n  // Other states...\n}\n\nexport const reducers: ActionReducerMap<AppState> = {\n  auth: authReducer,\n  accounts: accountReducer,\n  listings: listingsReducer,\n  // Other reducers...\n};\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/state/listings/listings.reducer.ts\n\nimport {createReducer, on} from \"@ngrx/store\";\nimport * as ListingsActions from \"../actions/listings.actions\";\nimport {Listing} from \"../../models/listing.model\";\nimport {ListingRelatedAccount} from \"../../models/listing-related-account.model\";\n\nexport interface ListingsState {\n  entities: {[id: string]: Listing}; // Dictionary of listings by ID\n  relatedAccounts: {[listingId: string]: ListingRelatedAccount[]};\n  selectedListingId: string | null; // Currently selected listing\n  loading: boolean; // Indicates if a request is in progress\n  error: string | null; // Stores any errors\n  filterType: string; // Type of listing to filter (e.g., 'all', 'active')\n  searchQuery: string; // Search query for filtering listings\n\n  // Timestamps for cache invalidation\n  listingsLastUpdated: number | null;\n  relatedAccountsLastUpdated: {[listingId: string]: number | null};\n}\n\nconst initialState: ListingsState = {\n  entities: {},\n  relatedAccounts: {},\n  selectedListingId: null,\n  loading: false,\n  error: null,\n  filterType: \"all\",\n  searchQuery: \"\",\n  // Timestamps for cache invalidation\n  listingsLastUpdated: null,\n  relatedAccountsLastUpdated: {},\n};\n\nexport const listingsReducer = createReducer(\n  initialState,\n\n  // Clear Account State\n  on(ListingsActions.clearListingsState, () => ({\n    ...initialState,\n  })),\n\n  // Load Listings\n  on(ListingsActions.loadListings, (state) => ({\n    ...state,\n    loading: true,\n    error: null,\n  })),\n  on(ListingsActions.loadListingsSuccess, (state, {listings}) => ({\n    ...state,\n    entities: listings.reduce(\n      (entities, listing) => ({\n        ...entities,\n        [listing.id]: listing,\n      }),\n      {},\n    ),\n    listingsLastUpdated: Date.now(),\n    loading: false,\n  })),\n  on(ListingsActions.loadListingsFailure, (state, {error}) => ({\n    ...state,\n    loading: false,\n    error,\n  })),\n\n  // Load Listing by ID\n  on(ListingsActions.loadListingByIdSuccess, (state, {listing}) => ({\n    ...state,\n    entities: listing\n      ? {\n          ...state.entities,\n          [listing.id]: listing,\n        }\n      : state.entities,\n    selectedListingId: listing?.id || null,\n    loading: false,\n  })),\n  on(ListingsActions.loadListingByIdFailure, (state, {error}) => ({\n    ...state,\n    error,\n    loading: false,\n  })),\n\n  // Create Listing\n  on(ListingsActions.createListingSuccess, (state, {listing}) => ({\n    ...state,\n    entities: {\n      ...state.entities,\n      [listing.id]: listing,\n    },\n    selectedListingId: listing.id,\n    loading: false,\n  })),\n  on(ListingsActions.createListingFailure, (state, {error}) => ({\n    ...state,\n    loading: false,\n    error,\n  })),\n\n  // Update Listing\n  on(ListingsActions.updateListingSuccess, (state, {listing}) => ({\n    ...state,\n    entities: {\n      ...state.entities,\n      [listing.id]: listing,\n    },\n    loading: false,\n  })),\n  on(ListingsActions.updateListingFailure, (state, {error}) => ({\n    ...state,\n    loading: false,\n    error,\n  })),\n\n  // Delete Listing\n  on(ListingsActions.deleteListingSuccess, (state, {id}) => {\n    const {[id]: removed, ...entities} = state.entities;\n    const selectedListingId =\n      state.selectedListingId === id ? null : state.selectedListingId;\n    return {\n      ...state,\n      entities,\n      selectedListingId,\n    };\n  }),\n\n  // Delete Listing Failure\n  on(ListingsActions.deleteListingFailure, (state, {error}) => ({\n    ...state,\n    loading: false,\n    error,\n  })),\n\n  // Filtering Listings\n  on(ListingsActions.filterListings, (state, {listingType}) => ({\n    ...state,\n    filterType: listingType,\n  })),\n\n  // Searching Listings\n  on(ListingsActions.searchListings, (state, {query}) => ({\n    ...state,\n    searchQuery: query,\n  })),\n\n  // Submit Application\n  on(ListingsActions.submitApplication, (state) => ({\n    ...state,\n    loading: true,\n    error: null,\n  })),\n  on(ListingsActions.submitApplicationSuccess, (state) => ({\n    ...state,\n    loading: false,\n  })),\n  on(ListingsActions.submitApplicationFailure, (state, {error}) => ({\n    ...state,\n    loading: false,\n    error,\n  })),\n  on(ListingsActions.loadListingRelatedAccounts, (state) => ({\n    ...state,\n    loading: true,\n    error: null,\n  })),\n  on(\n    ListingsActions.loadListingRelatedAccountsSuccess,\n    (state, {listingId, relatedAccounts}) => ({\n      ...state,\n      relatedAccounts: {\n        ...state.relatedAccounts,\n        [listingId]: relatedAccounts,\n      },\n      loading: false,\n    }),\n  ),\n  on(ListingsActions.loadListingRelatedAccountsFailure, (state, {error}) => ({\n    ...state,\n    loading: false,\n    error,\n  })),\n  on(\n    ListingsActions.updateRelatedAccountSuccess,\n    (state, {listingId, relatedAccount}) => {\n      const updatedRelatedAccounts =\n        state.relatedAccounts[listingId]?.map((account) =>\n          account.id === relatedAccount.id ? relatedAccount : account,\n        ) || [];\n\n      return {\n        ...state,\n        relatedAccounts: {\n          ...state.relatedAccounts,\n          [listingId]: updatedRelatedAccounts,\n        },\n      };\n    },\n  ),\n  on(ListingsActions.updateRelatedAccountFailure, (state, {error}) => {\n    console.error(\"Failed to update related account:\", error);\n    return state;\n  }),\n);\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/state/selectors/account.selectors.ts\n\nimport {createFeatureSelector, createSelector} from \"@ngrx/store\";\nimport {AccountState} from \"../reducers/account.reducer\";\nimport {Account} from \"../../models/account.model\";\n\n// TTL Configuration\nconst ACCOUNTS_TTL = 5 * 60 * 1000; // 5 minutes\nconst RELATED_LISTINGS_TTL = 10 * 60 * 1000; // 10 minutes\n\n// Utility: Check if data is stale\nfunction isStale(lastUpdated: number | null, ttl: number): boolean {\n  if (!lastUpdated) return true; // If never updated, consider it stale\n  const now = Date.now();\n  return now - lastUpdated > ttl;\n}\n\n// Feature Selector\nexport const selectAccountState =\n  createFeatureSelector<AccountState>(\"accounts\");\n\n// Entity Selectors\nexport const selectAccountEntities = createSelector(\n  selectAccountState,\n  (state) => state.entities,\n);\n\nexport const selectAllAccounts = createSelector(\n  selectAccountEntities,\n  (entities) => Object.values(entities),\n);\n\nexport const selectAccountById = (accountId: string) =>\n  createSelector(selectAccountEntities, (entities) => entities[accountId]);\n\n// Selected Account Selectors\nexport const selectSelectedAccountId = createSelector(\n  selectAccountState,\n  (state) => state.selectedAccountId,\n);\n\nexport const selectSelectedAccount = createSelector(\n  selectAccountEntities,\n  selectSelectedAccountId,\n  (entities, selectedAccountId) =>\n    selectedAccountId ? entities[selectedAccountId] : null,\n);\n\n// Related Data Selectors\nexport const selectRelatedAccountsByAccountId = (accountId: string) =>\n  createSelector(\n    selectAccountState,\n    (state) => state.relatedAccounts[accountId] || [],\n  );\n\nexport const selectRelatedListingsByAccountId = (accountId: string) =>\n  createSelector(\n    selectAccountState,\n    (state) => state.relatedListings[accountId] || [],\n  );\n\n// Loading and Error Selectors\nexport const selectAccountLoading = createSelector(\n  selectAccountState,\n  (state) => state.loading,\n);\n\nexport const selectAccountError = createSelector(\n  selectAccountState,\n  (state) => state.error,\n);\n\n// Filtered Accounts Selector\nexport const selectFilteredAccounts = (\n  searchTerm: string,\n  accountType: string,\n) =>\n  createSelector(selectAllAccounts, (accounts: Account[]) => {\n    const normalizeString = (str: string) =>\n      str\n        .toLowerCase()\n        .replace(/\\s+/g, \"\")\n        .replace(/[^a-z0-9]/gi, \"\");\n\n    const normalizedSearchTerm = normalizeString(searchTerm);\n\n    return accounts\n      .filter((acc) => {\n        if (acc.type !== accountType || !acc.name) {\n          return false;\n        }\n        const normalizedAccountName = normalizeString(acc.name);\n        return normalizedAccountName.includes(normalizedSearchTerm);\n      })\n      .sort((a, b) => (a.name && b.name ? a.name.localeCompare(b.name) : 0));\n  });\n\n// Cache and Freshness Selectors\nexport const selectAccountsLastUpdated = createSelector(\n  selectAccountState,\n  (state) => state.accountsLastUpdated,\n);\n\nexport const selectRelatedAccountsLastUpdated = (accountId: string) =>\n  createSelector(\n    selectAccountState,\n    (state) => state.relatedAccountsLastUpdated[accountId] || null,\n  );\n\nexport const selectRelatedListingsLastUpdated = (accountId: string) =>\n  createSelector(\n    selectAccountState,\n    (state) => state.relatedListingsLastUpdated[accountId] || null,\n  );\n\nexport const selectAreAccountsFresh = createSelector(\n  selectAccountsLastUpdated,\n  (accountsLastUpdated) => !isStale(accountsLastUpdated, ACCOUNTS_TTL),\n);\n\nexport const selectAreRelatedAccountsFresh = (accountId: string) =>\n  createSelector(\n    selectRelatedAccountsLastUpdated(accountId),\n    (relatedAccountsLastUpdated) =>\n      !isStale(relatedAccountsLastUpdated, ACCOUNTS_TTL),\n  );\n\nexport const selectAreRelatedListingsFresh = (accountId: string) =>\n  createSelector(\n    selectRelatedListingsLastUpdated(accountId),\n    (relatedListingsLastUpdated) =>\n      !isStale(relatedListingsLastUpdated, RELATED_LISTINGS_TTL),\n  );\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\n// src/app/core/store/auth/auth.selectors.ts\n\nimport {createFeatureSelector, createSelector} from \"@ngrx/store\";\nimport {AuthState} from \"../reducers/auth.reducer\";\nimport {AuthUser} from \"../../models/auth-user.model\";\n\nexport const selectAuthState = createFeatureSelector<AuthState>(\"auth\");\n\nexport const selectAuthUser = createSelector(\n  selectAuthState,\n  (state: AuthState) => state.user,\n);\n\nexport const selectIsLoggedIn = createSelector(\n  selectAuthUser,\n  (user: AuthUser | null): boolean => !!user,\n);\n\nexport const selectAuthLoading = createSelector(\n  selectAuthState,\n  (state: AuthState) => state.loading,\n);\n\nexport const selectAuthError = createSelector(\n  selectAuthState,\n  (state: AuthState) => state.error,\n);\n","\nexport const environment = {\n  production: false,\n  firebaseConfig: {\n    apiKey: 'AIzaSyATq5A6OaHtXtDSRoC1DZ8T_xegCZiUocU',\n    authDomain: 'ascendcoopplatform-dev.firebaseapp.com',\n    databaseURL: 'https://ascendcoopplatform-dev-default-rtdb.firebaseio.com',\n    projectId: 'ascendcoopplatform-dev',\n    storageBucket: 'ascendcoopplatform-dev.appspot.com',\n    messagingSenderId: '360409127691',\n    appId: '1:360409127691:web:b1c488ce58f4e9330ca00e',\n    measurementId: 'G-9EKFS37KV8',\n    apiUrl: 'https://us-central1-ascendcoopplatform-dev.cloudfunctions.net',\n  }\n};\n","/***********************************************************************************************\n* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.\n* Copyright (C) 2023  ASCENDynamics NFP\n*\n* This file is part of Nonprofit Social Networking Platform.\n*\n* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as published\n* by the Free Software Foundation, either version 3 of the License, or\n* (at your option) any later version.\n\n* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n\n* You should have received a copy of the GNU Affero General Public License\n* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.\n***********************************************************************************************/\nimport {enableProdMode} from \"@angular/core\";\nimport {platformBrowserDynamic} from \"@angular/platform-browser-dynamic\";\n\nimport {AppModule} from \"./app/app.module\";\nimport {environment} from \"./environments/environment\";\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch((err) => console.error(err));\n","var map = {\n\t\"./ion-accordion_2.entry.js\": [\n\t\t163,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-accordion_2_entry_js\"\n\t],\n\t\"./ion-action-sheet.entry.js\": [\n\t\t7026,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-action-sheet_entry_js\"\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t7394,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-alert_entry_js\"\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t5732,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-app_8_entry_js\"\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t7594,\n\t\t\"node_modules_ionic_core_dist_esm_ion-avatar_3_entry_js\"\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t7966,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-back-button_entry_js\"\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t660,\n\t\t\"node_modules_ionic_core_dist_esm_ion-backdrop_entry_js\"\n\t],\n\t\"./ion-breadcrumb_2.entry.js\": [\n\t\t3102,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-breadcrumb_2_entry_js\"\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t6651,\n\t\t\"node_modules_ionic_core_dist_esm_ion-button_2_entry_js\"\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t6236,\n\t\t\"node_modules_ionic_core_dist_esm_ion-card_5_entry_js\"\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t1347,\n\t\t\"node_modules_ionic_core_dist_esm_ion-checkbox_entry_js\"\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t3988,\n\t\t\"node_modules_ionic_core_dist_esm_ion-chip_entry_js\"\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t2936,\n\t\t\"node_modules_ionic_core_dist_esm_ion-col_3_entry_js\"\n\t],\n\t\"./ion-datetime-button.entry.js\": [\n\t\t584,\n\t\t\"default-node_modules_ionic_core_dist_esm_data-ae11fd43_js\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-datetime-button_entry_js\"\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t1065,\n\t\t\"default-node_modules_ionic_core_dist_esm_data-ae11fd43_js\",\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-datetime_3_entry_js\"\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t2000,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-fab_3_entry_js\"\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t2939,\n\t\t\"node_modules_ionic_core_dist_esm_ion-img_entry_js\"\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t4367,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-infinite-scroll_2_entry_js\"\n\t],\n\t\"./ion-input-password-toggle.entry.js\": [\n\t\t7949,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-input-password-toggle_entry_js\"\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t4924,\n\t\t\"default-node_modules_ionic_core_dist_esm_input_utils-09c71bc7_js-node_modules_ionic_core_dist-8b8a84\",\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-input_entry_js\"\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t7625,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-item-option_3_entry_js\"\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t8958,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-item_8_entry_js\"\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t1320,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-loading_entry_js\"\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t6239,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-menu_3_entry_js\"\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t3421,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-modal_entry_js\"\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t5372,\n\t\t\"node_modules_ionic_core_dist_esm_ion-nav_2_entry_js\"\n\t],\n\t\"./ion-picker-column-option.entry.js\": [\n\t\t5441,\n\t\t\"node_modules_ionic_core_dist_esm_ion-picker-column-option_entry_js\"\n\t],\n\t\"./ion-picker-column.entry.js\": [\n\t\t7631,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-picker-column_entry_js\"\n\t],\n\t\"./ion-picker.entry.js\": [\n\t\t8716,\n\t\t\"node_modules_ionic_core_dist_esm_ion-picker_entry_js\"\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t4197,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-popover_entry_js\"\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t9333,\n\t\t\"node_modules_ionic_core_dist_esm_ion-progress-bar_entry_js\"\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t8030,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-radio_2_entry_js\"\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t2665,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-range_entry_js\"\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t7641,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-refresher_2_entry_js\"\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t6786,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-reorder_2_entry_js\"\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t5256,\n\t\t\"node_modules_ionic_core_dist_esm_ion-ripple-effect_entry_js\"\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t9886,\n\t\t\"node_modules_ionic_core_dist_esm_ion-route_4_entry_js\"\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t8653,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-searchbar_entry_js\"\n\t],\n\t\"./ion-segment-content.entry.js\": [\n\t\t2365,\n\t\t\"node_modules_ionic_core_dist_esm_ion-segment-content_entry_js\"\n\t],\n\t\"./ion-segment-view.entry.js\": [\n\t\t879,\n\t\t\"node_modules_ionic_core_dist_esm_ion-segment-view_entry_js\"\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t2492,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-segment_2_entry_js\"\n\t],\n\t\"./ion-select-modal.entry.js\": [\n\t\t4838,\n\t\t\"node_modules_ionic_core_dist_esm_ion-select-modal_entry_js\"\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t2904,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-select_3_entry_js\"\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t8369,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-spinner_entry_js\"\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t3283,\n\t\t\"node_modules_ionic_core_dist_esm_ion-split-pane_entry_js\"\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t7250,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-tab-bar_2_entry_js\"\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t3541,\n\t\t\"node_modules_ionic_core_dist_esm_ion-tab_2_entry_js\"\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t5325,\n\t\t\"node_modules_ionic_core_dist_esm_ion-text_entry_js\"\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t7448,\n\t\t\"default-node_modules_ionic_core_dist_esm_input_utils-09c71bc7_js-node_modules_ionic_core_dist-8b8a84\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-textarea_entry_js\"\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t7355,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-toast_entry_js\"\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t4034,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-toggle_entry_js\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 8996;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./pwa-action-sheet.entry.js\": [\n\t\t4209,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-action-sheet_entry_js\"\n\t],\n\t\"./pwa-camera-modal-instance.entry.js\": [\n\t\t6671,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-camera-modal-instance_entry_js\"\n\t],\n\t\"./pwa-camera-modal.entry.js\": [\n\t\t7290,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-camera-modal_entry_js\"\n\t],\n\t\"./pwa-camera.entry.js\": [\n\t\t8706,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-camera_entry_js\"\n\t],\n\t\"./pwa-toast.entry.js\": [\n\t\t8354,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-toast_entry_js\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 5235;\nmodule.exports = webpackAsyncContext;","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(() => {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = () => ([]);\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 4140;\nmodule.exports = webpackEmptyAsyncContext;"],"names":["RouterModule","FundingJsonComponent","routes","path","redirectTo","pathMatch","component","loadChildren","then","m","AuthModule","AccountModule","ListingModule","routerOptions","anchorScrolling","scrollPositionRestoration","onSameUrlNavigation","AppRoutingModule","forRoot","imports","i1","exports","selectIsLoggedIn","AuthActions","tap","register","AppComponent","constructor","menuCtrl","translate","store","platform","_this","addLangs","initializeApp","isLoggedIn$","select","pipe","_ref","_asyncToGenerator","isLoggedIn","updateMenu","_x","apply","arguments","ready","setDefaultLang","browserLang","getBrowserLang","use","match","ngOnInit","dispatch","initializeAuth","_this2","enable","i0","directiveInject","MenuController","i2","TranslateService","i3","Store","Platform","selectors","decls","vars","template","AppComponent_Template","rf","ctx","elementStart","element","elementEnd","isDevMode","BrowserModule","RouteReuseStrategy","IonicModule","IonicRouteStrategy","defineCustomElements","getStorage","environment","HttpClientModule","HttpClient","TranslateModule","TranslateLoader","TranslateHttpLoader","localStorageSync","StoreModule","EffectsModule","StoreDevtoolsModule","reducers","AccountEffects","AuthEffects","ErrorHandlerService","FirestoreService","ImageUploadService","SuccessHandlerService","AngularFireModule","AngularFirestoreModule","AuthSyncService","MenuComponent","app","firebaseConfig","window","localStorageSyncReducer","reducer","keys","rehydrate","metaReducers","createTranslateLoader","http","AppModule","bootstrap","provide","useClass","defaultLanguage","loader","useFactory","deps","instrument","maxAge","logOnly","declarations","i4","StoreRootModule","i5","EffectsRootModule","i6","getAuth","onAuthStateChanged","auth","user","signInSuccess","uid","signOutSuccess","inject","factory","fac","providedIn","toastController","FIREBASE_AUTH_ERROR","title","message","handleFirebaseAuthError","error","hasOwnProperty","code","_this$FIREBASE_AUTH_E","_this$FIREBASE_AUTH_E2","showToast","toast","create","duration","position","color","buttons","text","role","present","ToastController","combineLatest","firstValueFrom","of","map","catchError","FirebaseError","afs","storage","populateId","data","id","getDocument","collectionName","documentId","collection","doc","valueChanges","console","addDocument","documentData","documentRef","add","setDocument","docPath","options","set","updateDocument","updatedData","_this3","update","updateDocumentAtPath","_this4","deleteDocument","_this5","delete","deleteDocumentAtPath","fullPath","_this6","getCollectionWithCondition","field","condition","value","collectionRef","ref","where","snapshotChanges","actions","action","payload","searchAccountByName","searchTerm","queryRef","orderBy","startAt","endAt","idField","getRelatedAccounts","accountId","relatedAccountsRef","getAllAccounts","getAccountWithRelated","account","relatedAccounts","relatedListings","getDocuments","conditions","query","forEach","operator","uploadFile","file","_this7","fileRef","upload","getDownloadURL","AngularFirestore","AngularFireStorage","uploadBytesResumable","loadingController","firestoreService","uploadImage","firestoreLocation","docId","maxWidth","maxHeight","fieldName","loading","resizedImageBlob","resizeImage","filePath","Date","toISOString","name","storageRef","uploadTask","downloadURL","monitorUploadTask","saveImageToFirestore","dismiss","showErrorToast","Promise","resolve","reject","on","snapshot","progress","bytesTransferred","totalBytes","toFixed","Error","docData","image","Image","url","URL","createObjectURL","src","onload","revokeObjectURL","canvas","document","createElement","getContext","width","height","drawImage","toBlob","blob","onerror","LoadingController","handleSuccess","Validators","Timestamp","AccountActions","selectAuthUser","CreateGroupModalComponent","modalCtrl","fb","groupForm","group","required","description","tagline","cancel","confirm","onSubmit","groupData","authUser","newGroup","undefined","type","iconImage","heroImage","groupDetails","admins","dateFounded","now","supportedLanguages","createAccount","ModalController","FormBuilder","consts","CreateGroupModalComponent_Template","text","listener","CreateGroupModalComponent_Template_ion_button_click_5_listener","CreateGroupModalComponent_Template_form_ngSubmit_8_listener","advance","property","invalid","template","FeedbackModalComponent_ion_item_9_ion_note_4_Template","tmp_1_0","ctx_r0","feedbackForm","get","hasError","FeedbackModalComponent_ion_item_10_ion_note_4_Template","FeedbackModalComponent_ion_item_10_ion_note_5_Template","tmp_2_0","imageFileValidator","control","validTypes","indexOf","invalidImageType","fileSizeValidator","size","invalidFileSize","FeedbackModalComponent","errorHandler","categories","isUploading","uploadedFileURL","category","feedback","attachment","rating","min","max","addControl","displayName","email","onFileChange","event","fileList","target","files","length","_this$feedbackForm$ge","setValue","_this$user","state","submitFeedback","valid","_this$user2","_this$user3","_this$user4","formData","emailVerified","isRead","isResolved","catch","closeModal","inputs","FeedbackModalComponent_Template","FeedbackModalComponent_Template_ion_button_click_5_listener","FeedbackModalComponent_ion_item_9_Template","FeedbackModalComponent_ion_item_10_Template","FeedbackModalComponent_ion_note_25_Template","FeedbackModalComponent_Template_input_change_29_listener","$event","FeedbackModalComponent_ion_note_30_Template","FeedbackModalComponent_ion_note_31_Template","FeedbackModalComponent_Template_ion_button_click_38_listener","tmp_3_0","tmp_4_0","tmp_5_0","responseType","subscribe","next","Blob","JSON","stringify","location","href","err","FundingJsonComponent_Template","encapsulation","Subscription","MenuComponent_ng_container_11_ion_item_1_ion_button_4_Template_ion_button_click_0_listener","restoreView","_r1","resetView","stopPropagation","item_r2","buttonLink","textInterpolate1","buttonText","buttonIcon","MenuComponent_ng_container_11_ion_item_1_ion_button_4_Template","icon","textInterpolate","hasButton","elementContainerStart","MenuComponent_ng_container_11_ion_item_1_Template","MenuComponent_ion_item_12_Template_ion_item_click_0_listener","_r3","ctx_r3","nextContext","showFeedbackModal","p_r5","router","subscriptions","menuPages","project","authUser$","langChange$","onLangChange","menuPages$","langChange","setUserMenuItems","setGuestMenuItems","ngOnDestroy","unsubscribe","instant","handleButtonClick","modal","onWillDismiss","navigate","groupId","componentProps","Router","MenuComponent_Template","MenuComponent_ng_container_11_Template","MenuComponent_ion_item_12_Template","MenuComponent_ion_item_17_Template","createAction","props","clearAccountsState","loadAccounts","loadAccountsSuccess","loadAccountsFailure","loadAccount","loadAccountSuccess","loadAccountFailure","setSelectedAccount","createAccountSuccess","createAccountFailure","updateAccount","updateAccountSuccess","updateAccountFailure","deleteAccount","deleteAccountSuccess","deleteAccountFailure","searchAccounts","searchAccountsSuccess","searchAccountsFailure","createRelatedAccount","createRelatedAccountSuccess","createRelatedAccountFailure","deleteRelatedAccount","deleteRelatedAccountSuccess","deleteRelatedAccountFailure","loadRelatedAccounts","loadRelatedAccountsSuccess","loadRelatedAccountsFailure","updateRelatedAccount","updateRelatedAccountSuccess","updateRelatedAccountFailure","loadRelatedListings","loadRelatedListingsSuccess","loadRelatedListingsFailure","deleteRelatedListing","deleteRelatedListingSuccess","deleteRelatedListingFailure","sendVerificationMail","sendVerificationMailSuccess","sendVerificationMailFailure","signUp","signUpSuccess","signUpFailure","signIn","signInFailure","signInWithGoogle","signInWithGoogleSuccess","signInWithGoogleFailure","signOut","signOutFailure","sendPasswordResetEmail","sendPasswordResetEmailSuccess","sendPasswordResetEmailFailure","sendSignInLinkToEmail","sendSignInLinkToEmailSuccess","sendSignInLinkToEmailFailure","confirmSignInWithEmailLink","confirmSignInWithEmailLinkSuccess","confirmSignInWithEmailLinkFailure","processSignInLink","processSignInLinkSuccess","processSignInLinkFailure","updateAuthUser","updateAuthUserSuccess","updateAuthUserFailure","loadListings","clearListingsState","loadListingsSuccess","loadListingsFailure","loadListingById","loadListingByIdSuccess","loadListingByIdFailure","updateListing","updateListingSuccess","updateListingFailure","createListing","createListingSuccess","createListingFailure","deleteListing","deleteListingSuccess","deleteListingFailure","filterListings","searchListings","submitApplication","submitApplicationSuccess","submitApplicationFailure","loadListingRelatedAccounts","loadListingRelatedAccountsSuccess","loadListingRelatedAccountsFailure","createEffect","ofType","EMPTY","from","switchMap","mergeMap","withLatestFrom","debounceTime","take","filter","serverTimestamp","selectAccountById","selectAccountEntities","selectAreAccountsFresh","selectAreRelatedAccountsFresh","selectAreRelatedListingsFresh","actions$","loadAccounts$","_","areFresh","accounts","loadAccount$","existingAccount","createAccount$","newAccount","createdAt","lastModifiedAt","updateAccount$","updatedAccount","deleteAccount$","searchAccounts$","accountsData","accountData","createRelatedAccount$","relatedAccount","newRelatedAccount","deleteRelatedAccount$","relatedAccountId","loadRelatedAccounts$","updateRelatedAccount$","updatedRelatedAccount","loadRelatedListings$","syncAuthUserWithAccount$","settings","setSelectedAccount$","entities","accountExists","deleteRelatedListing$","relatedListingId","Actions","ListingsActions","signInWithEmailLink","signInWithEmailAndPassword","createUserWithEmailAndPassword","signInWithPopup","GoogleAuthProvider","isSignInWithEmailLink","exhaustMap","successHandler","alertController","actionCodeSettings","origin","handleCodeInApp","initializeAuth$","localStorage","getItem","link","promptForEmail","processSignInLink$","result","idTokenResult","getIdTokenResult","claims","createAuthUserFromClaims","signUp$","password","navigateByUrl","replaceUrl","_ref2","_x2","signIn$","_ref3","_x3","signInWithGoogle$","_ref4","_x4","signInSuccess$","signOut$","sendPasswordResetEmail$","sendVerificationMail$","sendSignInLinkToEmail$","setItem","sendSignInLinkToEmailSuccess$","alert","header","sendSignInLinkToEmailFailure$","_ref6","_x5","updateAuthUser$","currentUser","placeholder","handler","onDidDismiss","_result$data","values","_account$contactInfor","defaultIconImage","photoURL","defaultHeroImage","defaultTagline","defaultSettings","language","theme","metadata","creationTime","lastLoginAt","lastSignInTime","phoneNumber","contactInformation","phoneNumbers","number","providerData","AlertController","createReducer","initialState","selectedAccountId","accountsLastUpdated","relatedAccountsLastUpdated","relatedListingsLastUpdated","accountReducer","reduce","removedAccount","removedRelatedAccounts","removedRelatedListings","ra","authReducer","listingsReducer","listings","selectedListingId","filterType","searchQuery","listingsLastUpdated","listing","removed","listingType","listingId","_state$relatedAccount","updatedRelatedAccounts","createFeatureSelector","createSelector","ACCOUNTS_TTL","RELATED_LISTINGS_TTL","isStale","lastUpdated","ttl","selectAccountState","selectAllAccounts","Object","selectSelectedAccountId","selectSelectedAccount","selectRelatedAccountsByAccountId","selectRelatedListingsByAccountId","selectAccountLoading","selectAccountError","selectFilteredAccounts","accountType","normalizeString","str","toLowerCase","replace","normalizedSearchTerm","acc","normalizedAccountName","includes","sort","a","b","localeCompare","selectAccountsLastUpdated","selectRelatedAccountsLastUpdated","selectRelatedListingsLastUpdated","selectAuthState","selectAuthLoading","selectAuthError","production","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","apiUrl","enableProdMode","__NgCli_bootstrap_1","platformBrowser","bootstrapModule"],"sourceRoot":"webpack:///","x_google_ignoreList":[29,30,31]}