<!--
/***********************************************************************************************
* Nonprofit Social Networking Platform: Allowing Users and Organizations to Collaborate.
* Copyright (C) 2023  ASCENDynamics NFP
*
* This file is part of Nonprofit Social Networking Platform.
*
* Nonprofit Social Networking Platform is free software: you can redistribute it and/or modify
* it under the terms of the GNU Affero General Public License as published
* by the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.

* Nonprofit Social Networking Platform is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU Affero General Public License for more details.

* You should have received a copy of the GNU Affero General Public License
* along with Nonprofit Social Networking Platform.  If not, see <https://www.gnu.org/licenses/>.
***********************************************************************************************/
-->

<div class="project-creation">
  <!-- Project Name Row -->
  <div class="project-name-row">
    <div class="form-field project-name-field">
      <ion-label class="required-label">Project Name</ion-label>
      <ion-input
        placeholder="Enter your project name"
        [value]="state.newProjectName"
        (ionInput)="onProjectNameChange($event.detail.value || '')"
        (keyup.enter)="createProject()"
        clearInput="true"
        class="borderless-input"
        required
      ></ion-input>
    </div>
  </div>

  <!-- Project Category Row -->
  <div class="project-category-row">
    <div class="form-field project-category-field">
      <ion-label class="required-label">Project Category</ion-label>
      <app-category-selector
        [selectedCategory]="state.selectedCategory"
        (categoryChange)="onCategorySelected($event)"
        placeholder="Choose category"
        [required]="true"
      ></app-category-selector>
    </div>
  </div>

  <!-- Smart Category Suggestions -->
  <app-smart-category-suggestions
    [suggestions]="state.suggestedCategories"
    [visible]="state.showCategorySuggestions"
    (categorySelected)="onCategorySuggestionSelected($event)"
    (dismissed)="dismissCategorySuggestions()"
  ></app-smart-category-suggestions>

  <!-- Template Selection Row -->
  <div
    class="template-selection"
    *ngIf="state.selectedCategory && state.availableTemplates.length > 0"
  >
    <div class="template-row">
      <div class="template-field">
        <ion-label class="template-label">Choose Template (Optional)</ion-label>
        <div class="template-options">
          <div
            *ngFor="let template of state.availableTemplates"
            class="template-option"
            [class.selected]="state.selectedTemplate === template"
            (click)="onTemplateSelected(template)"
          >
            <div class="template-icon">
              <ion-icon [name]="template.icon || 'document'"></ion-icon>
            </div>
            <div class="template-info">
              <span class="template-name">{{ template.name }}</span>
              <span class="template-description">{{
                template.description
              }}</span>
            </div>
          </div>
          <div
            class="template-option no-template"
            [class.selected]="!state.selectedTemplate"
            (click)="onTemplateSelected(undefined)"
          >
            <div class="template-icon">
              <ion-icon name="create"></ion-icon>
            </div>
            <div class="template-info">
              <span class="template-name">Start from scratch</span>
              <span class="template-description">Create a custom project</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="creation-actions" *ngIf="canCreateProject()">
    <ion-button fill="outline" (click)="onCancel()">
      <ion-icon name="close" slot="start"></ion-icon>
      Cancel
    </ion-button>

    <ion-button
      fill="outline"
      (click)="onPreview()"
      *ngIf="state.selectedTemplate"
    >
      <ion-icon name="eye" slot="start"></ion-icon>
      Preview Template
    </ion-button>

    <ion-button
      (click)="createProject()"
      [disabled]="!canCreateProject()"
      class="create-button"
    >
      <ion-icon name="add-circle" slot="start"></ion-icon>
      {{ getCreateButtonText() }}
    </ion-button>
  </div>
</div>
